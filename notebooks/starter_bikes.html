<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.27">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>starter_bikes – Jacob Walker - Data Science Portfolio</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script><script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../Images/favicon.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-ed96de9b727972fe78a7b5d16c58bf87.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-4d9afe2b8d18ee9fa5d0d57b5ed4214d.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-ed96de9b727972fe78a7b5d16c58bf87.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-47a2569239650a328465399e13938bea.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark-52a40c8f424a6d1e268fe027cedb2c07.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../site_libs/bootstrap/bootstrap-47a2569239650a328465399e13938bea.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js" integrity="sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Jacob Walker - Data Science Portfolio</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../resume.html"> 
<span class="menu-text">My Resume</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../cleansing.html"> 
<span class="menu-text">Data Cleansing</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../exploration.html"> 
<span class="menu-text">Data Exploration</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../story_telling.html"> 
<span class="menu-text">Story Telling</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../ml.html"> 
<span class="menu-text">Machine Learning</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../full_stack.html"> 
<span class="menu-text">Full Stack</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../competition.html"> 
<span class="menu-text">Competition</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#task" id="toc-task" class="nav-link active" data-scroll-target="#task">Task</a>
  <ul class="collapse">
  <li><a href="#calculate-total-riders" id="toc-calculate-total-riders" class="nav-link" data-scroll-target="#calculate-total-riders">Calculate Total Riders</a>
  <ul class="collapse">
  <li><a href="#subtask" id="toc-subtask" class="nav-link" data-scroll-target="#subtask">Subtask:</a></li>
  </ul></li>
  <li><a href="#create-combined-bar-and-line-chart" id="toc-create-combined-bar-and-line-chart" class="nav-link" data-scroll-target="#create-combined-bar-and-line-chart">Create Combined Bar and Line Chart</a>
  <ul class="collapse">
  <li><a href="#subtask-1" id="toc-subtask-1" class="nav-link" data-scroll-target="#subtask-1">Subtask:</a></li>
  </ul></li>
  <li><a href="#final-task" id="toc-final-task" class="nav-link" data-scroll-target="#final-task">Final Task</a>
  <ul class="collapse">
  <li><a href="#subtask-2" id="toc-subtask-2" class="nav-link" data-scroll-target="#subtask-2">Subtask:</a></li>
  </ul></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary">Summary:</a>
  <ul class="collapse">
  <li><a href="#qa" id="toc-qa" class="nav-link" data-scroll-target="#qa">Q&amp;A</a></li>
  <li><a href="#data-analysis-key-findings" id="toc-data-analysis-key-findings" class="nav-link" data-scroll-target="#data-analysis-key-findings">Data Analysis Key Findings</a></li>
  <li><a href="#insights-or-next-steps" id="toc-insights-or-next-steps" class="nav-link" data-scroll-target="#insights-or-next-steps">Insights or Next Steps</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#task-1" id="toc-task-1" class="nav-link" data-scroll-target="#task-1">Task</a>
  <ul class="collapse">
  <li><a href="#prepare-data-for-hourly-analysis" id="toc-prepare-data-for-hourly-analysis" class="nav-link" data-scroll-target="#prepare-data-for-hourly-analysis">Prepare Data for Hourly Analysis</a>
  <ul class="collapse">
  <li><a href="#subtask-3" id="toc-subtask-3" class="nav-link" data-scroll-target="#subtask-3">Subtask:</a></li>
  </ul></li>
  <li><a href="#aggregate-hourly-bike-usage" id="toc-aggregate-hourly-bike-usage" class="nav-link" data-scroll-target="#aggregate-hourly-bike-usage">Aggregate Hourly Bike Usage</a>
  <ul class="collapse">
  <li><a href="#subtask-4" id="toc-subtask-4" class="nav-link" data-scroll-target="#subtask-4">Subtask:</a></li>
  </ul></li>
  <li><a href="#generate-hourly-bike-usage-line-charts" id="toc-generate-hourly-bike-usage-line-charts" class="nav-link" data-scroll-target="#generate-hourly-bike-usage-line-charts">Generate Hourly Bike Usage Line Charts</a>
  <ul class="collapse">
  <li><a href="#subtask-5" id="toc-subtask-5" class="nav-link" data-scroll-target="#subtask-5">Subtask:</a></li>
  </ul></li>
  <li><a href="#summarize-hourly-bike-usage-trends" id="toc-summarize-hourly-bike-usage-trends" class="nav-link" data-scroll-target="#summarize-hourly-bike-usage-trends">Summarize Hourly Bike Usage Trends</a>
  <ul class="collapse">
  <li><a href="#subtask-6" id="toc-subtask-6" class="nav-link" data-scroll-target="#subtask-6">Subtask:</a></li>
  </ul></li>
  <li><a href="#summary-1" id="toc-summary-1" class="nav-link" data-scroll-target="#summary-1">Summary:</a>
  <ul class="collapse">
  <li><a href="#qa-1" id="toc-qa-1" class="nav-link" data-scroll-target="#qa-1">Q&amp;A</a></li>
  <li><a href="#data-analysis-key-findings-1" id="toc-data-analysis-key-findings-1" class="nav-link" data-scroll-target="#data-analysis-key-findings-1">Data Analysis Key Findings</a></li>
  <li><a href="#insights-or-next-steps-1" id="toc-insights-or-next-steps-1" class="nav-link" data-scroll-target="#insights-or-next-steps-1">Insights or Next Steps</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"></header>





<p><a href="https://colab.research.google.com/github/jacob-walker12/jacob-walker12.github.io/blob/main/notebooks/starter_bikes.ipynb" target="_parent"><img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab"></a></p>
<div id="cell-1" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;colab&quot;,&quot;value&quot;:{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:443}}" data-outputid="a5967a77-2669-4091-b3f0-c3fa57e65436" data-execution_count="47">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> tensorflow <span class="im">as</span> tf</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> tensorflow <span class="im">import</span> keras</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> tensorflow.keras <span class="im">import</span> layers</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>bike <span class="op">=</span> pd.read_csv(<span class="st">'https://raw.githubusercontent.com/byui-cse/cse450-course/master/data/bikes.csv'</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>bike</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="47">
<div id="df-74c14b5c-1831-45b5-b198-1972d9560a4e" class="colab-df-container">
    <div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">dteday</th>
<th data-quarto-table-cell-role="th">hr</th>
<th data-quarto-table-cell-role="th">casual</th>
<th data-quarto-table-cell-role="th">registered</th>
<th data-quarto-table-cell-role="th">temp_c</th>
<th data-quarto-table-cell-role="th">feels_like_c</th>
<th data-quarto-table-cell-role="th">hum</th>
<th data-quarto-table-cell-role="th">windspeed</th>
<th data-quarto-table-cell-role="th">weathersit</th>
<th data-quarto-table-cell-role="th">season</th>
<th data-quarto-table-cell-role="th">holiday</th>
<th data-quarto-table-cell-role="th">workingday</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>1/1/2011</td>
<td>0.0</td>
<td>3</td>
<td>13</td>
<td>3.0</td>
<td>3.0</td>
<td>0.7957</td>
<td>0.8</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>1/1/2011</td>
<td>1.0</td>
<td>8</td>
<td>30</td>
<td>1.7</td>
<td>1.7</td>
<td>0.8272</td>
<td>0.8</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>1/1/2011</td>
<td>2.0</td>
<td>5</td>
<td>26</td>
<td>1.9</td>
<td>1.9</td>
<td>0.8157</td>
<td>1.1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>1/1/2011</td>
<td>3.0</td>
<td>3</td>
<td>9</td>
<td>2.5</td>
<td>2.5</td>
<td>0.7831</td>
<td>0.8</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>1/1/2011</td>
<td>4.0</td>
<td>0</td>
<td>1</td>
<td>2.0</td>
<td>2.0</td>
<td>0.8075</td>
<td>1.1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">...</th>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">112470</th>
<td>10/31/2023</td>
<td>19.0</td>
<td>241</td>
<td>594</td>
<td>10.2</td>
<td>10.2</td>
<td>0.4516</td>
<td>8.4</td>
<td>2</td>
<td>4</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">112471</th>
<td>10/31/2023</td>
<td>20.0</td>
<td>171</td>
<td>450</td>
<td>8.9</td>
<td>7.5</td>
<td>0.5268</td>
<td>9.3</td>
<td>1</td>
<td>4</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">112472</th>
<td>10/31/2023</td>
<td>21.0</td>
<td>176</td>
<td>402</td>
<td>7.7</td>
<td>6.4</td>
<td>0.5756</td>
<td>7.8</td>
<td>1</td>
<td>4</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">112473</th>
<td>10/31/2023</td>
<td>22.0</td>
<td>106</td>
<td>257</td>
<td>8.0</td>
<td>8.0</td>
<td>0.5604</td>
<td>0.0</td>
<td>1</td>
<td>4</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">112474</th>
<td>10/31/2023</td>
<td>23.0</td>
<td>78</td>
<td>135</td>
<td>6.5</td>
<td>6.5</td>
<td>0.6401</td>
<td>4.5</td>
<td>1</td>
<td>4</td>
<td>0</td>
<td>1</td>
</tr>
</tbody>
</table>

<p>112475 rows × 12 columns</p>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-74c14b5c-1831-45b5-b198-1972d9560a4e')" title="Convert this dataframe to an interactive table." style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewbox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"></path>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-74c14b5c-1831-45b5-b198-1972d9560a4e button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-74c14b5c-1831-45b5-b198-1972d9560a4e');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>


  <div id="id_e9e41955-b527-41b5-8173-f43855e12195">
    <style>
      .colab-df-generate {
        background-color: #E8F0FE;
        border: none;
        border-radius: 50%;
        cursor: pointer;
        display: none;
        fill: #1967D2;
        height: 32px;
        padding: 0 0 0 0;
        width: 32px;
      }

      .colab-df-generate:hover {
        background-color: #E2EBFA;
        box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
        fill: #174EA6;
      }

      [theme=dark] .colab-df-generate {
        background-color: #3B4455;
        fill: #D2E3FC;
      }

      [theme=dark] .colab-df-generate:hover {
        background-color: #434B5C;
        box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
        filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
        fill: #FFFFFF;
      }
    </style>
    <button class="colab-df-generate" onclick="generateWithVariable('bike')" title="Generate code using this dataframe." style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewbox="0 0 24 24" width="24px">
    <path d="M7,19H8.4L18.45,9,17,7.55,7,17.6ZM5,21V16.75L18.45,3.32a2,2,0,0,1,2.83,0l1.4,1.43a1.91,1.91,0,0,1,.58,1.4,1.91,1.91,0,0,1-.58,1.4L9.25,21ZM18.45,9,17,7.55Zm-12,3A5.31,5.31,0,0,0,4.9,8.1,5.31,5.31,0,0,0,1,6.5,5.31,5.31,0,0,0,4.9,4.9,5.31,5.31,0,0,0,6.5,1,5.31,5.31,0,0,0,8.1,4.9,5.31,5.31,0,0,0,12,6.5,5.46,5.46,0,0,0,6.5,12Z"></path>
  </svg>
    </button>
    <script>
      (() => {
      const buttonEl =
        document.querySelector('#id_e9e41955-b527-41b5-8173-f43855e12195 button.colab-df-generate');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      buttonEl.onclick = () => {
        google.colab.notebook.generateWithVariable('bike');
      }
      })();
    </script>
  </div>

    </div>
  </div>
</div>
</div>
<div id="cell-2" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;colab&quot;,&quot;value&quot;:{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}}" data-outputid="859d14d8-25e9-4efa-b714-2eb10dc6e5fb" data-execution_count="48">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pandas.tseries.holiday <span class="im">import</span> USFederalHolidayCalendar</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># -----------------------------</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Load + parse dates</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co"># -----------------------------</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>bike[<span class="st">'dteday'</span>] <span class="op">=</span> pd.to_datetime(bike[<span class="st">'dteday'</span>])</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Handy bounds (auto-adjust to your dataset)</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>min_day <span class="op">=</span> bike[<span class="st">'dteday'</span>].<span class="bu">min</span>()</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>max_day <span class="op">=</span> bike[<span class="st">'dteday'</span>].<span class="bu">max</span>()</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="co"># -----------------------------</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="co"># 1) COVID lockdown indicator (DC stay-at-home order period)</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="co">#   DC stay-at-home order effective 2020-04-01; extended through mid/late May 2020.</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="co">#   You can broaden this window if you mean "COVID restriction era" rather than strict stay-at-home.</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="co"># -----------------------------</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>covid_lockdown_ranges <span class="op">=</span> [</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2020-04-01'</span>, <span class="st">'2020-05-29'</span>),  <span class="co"># DC stay-at-home era (edit end date if your definition differs)</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>bike[<span class="st">'covid_lockdown'</span>] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> start, end <span class="kw">in</span> covid_lockdown_ranges:</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>    start <span class="op">=</span> pd.to_datetime(start)</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    end <span class="op">=</span> pd.to_datetime(end)</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>    bike.loc[(bike[<span class="st">'dteday'</span>] <span class="op">&gt;=</span> start) <span class="op">&amp;</span> (bike[<span class="st">'dteday'</span>] <span class="op">&lt;=</span> end), <span class="st">'covid_lockdown'</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a><span class="co"># -----------------------------</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a><span class="co"># 2) Government shutdown indicator (US federal shutdowns affecting DC)</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a><span class="co"># -----------------------------</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>gov_shutdown_ranges <span class="op">=</span> [</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2013-10-01'</span>, <span class="st">'2013-10-17'</span>),  <span class="co"># 2013 shutdown</span></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2018-01-20'</span>, <span class="st">'2018-01-22'</span>),  <span class="co"># 2018 shutdown</span></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2018-12-22'</span>, <span class="st">'2019-01-25'</span>),  <span class="co"># 2018-2019 shutdown</span></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>bike[<span class="st">'gov_shutdown'</span>] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> start, end <span class="kw">in</span> gov_shutdown_ranges:</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>    start <span class="op">=</span> pd.to_datetime(start)</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>    end <span class="op">=</span> pd.to_datetime(end)</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>    bike.loc[(bike[<span class="st">'dteday'</span>] <span class="op">&gt;=</span> start) <span class="op">&amp;</span> (bike[<span class="st">'dteday'</span>] <span class="op">&lt;=</span> end), <span class="st">'gov_shutdown'</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a><span class="co"># -----------------------------</span></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a><span class="co"># 3) Big event indicator (EDIT these to match what *you* consider "big events")</span></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a><span class="co">#   Examples shown: major DC-centric events (inaugurations) + a couple of common big days.</span></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a><span class="co"># -----------------------------</span></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>big_event_ranges <span class="op">=</span> [</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2013-01-18'</span>, <span class="st">'2013-01-22'</span>),  <span class="co"># 2013 presidential inauguration weekend window</span></span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2017-01-19'</span>, <span class="st">'2017-01-21'</span>),  <span class="co"># 2017 inauguration window</span></span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2021-01-19'</span>, <span class="st">'2021-01-21'</span>),  <span class="co"># 2021 inauguration window</span></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2015-09-22'</span>, <span class="st">'2015-09-24'</span>),  <span class="co"># example: Papal visit window (edit if desired)</span></span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2020-06-01'</span>, <span class="st">'2020-06-02'</span>),  <span class="co"># example: curfew/unrest peak window (edit if desired)</span></span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>bike[<span class="st">'big_event'</span>] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> start, end <span class="kw">in</span> big_event_ranges:</span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a>    start <span class="op">=</span> pd.to_datetime(start)</span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a>    end <span class="op">=</span> pd.to_datetime(end)</span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>    bike.loc[(bike[<span class="st">'dteday'</span>] <span class="op">&gt;=</span> start) <span class="op">&amp;</span> (bike[<span class="st">'dteday'</span>] <span class="op">&lt;=</span> end), <span class="st">'big_event'</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a><span class="co"># -----------------------------</span></span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a><span class="co"># 4) Major holiday indicator</span></span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a><span class="co">#   Strategy:</span></span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a><span class="co">#   - If your dataset has a "holiday" column (0/1), keep it as a baseline</span></span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a><span class="co">#   - Define "major" as: (holiday==1) AND also matches US federal holiday calendar</span></span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a><span class="co">#     OR (explicitly listed major fixed-date holidays like Jul 4 / Dec 25 / Jan 1).</span></span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a><span class="co"># -----------------------------</span></span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a><span class="co"># US federal holidays within data range</span></span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a>cal <span class="op">=</span> USFederalHolidayCalendar()</span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a>federal_holidays <span class="op">=</span> cal.holidays(start<span class="op">=</span>min_day, end<span class="op">=</span>max_day)</span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a><span class="co"># Fixed-date major holidays (commonly treated as major regardless of calendar nuances)</span></span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a>fixed_major_md <span class="op">=</span> {(<span class="dv">1</span>, <span class="dv">1</span>), (<span class="dv">7</span>, <span class="dv">4</span>), (<span class="dv">12</span>, <span class="dv">25</span>)}  <span class="co"># New Year, Independence Day, Christmas</span></span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a>fixed_major <span class="op">=</span> bike[<span class="st">'dteday'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> d: (d.month, d.day) <span class="kw">in</span> fixed_major_md)</span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a><span class="co"># If your dataset has 'holiday', incorporate it; otherwise just use calendar logic</span></span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="st">'holiday'</span> <span class="kw">in</span> bike.columns:</span>
<span id="cb2-78"><a href="#cb2-78" aria-hidden="true" tabindex="-1"></a>    bike[<span class="st">'major_holiday'</span>] <span class="op">=</span> (</span>
<span id="cb2-79"><a href="#cb2-79" aria-hidden="true" tabindex="-1"></a>        ((bike[<span class="st">'holiday'</span>] <span class="op">==</span> <span class="dv">1</span>) <span class="op">&amp;</span> (bike[<span class="st">'dteday'</span>].isin(federal_holidays) <span class="op">|</span> fixed_major))</span>
<span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a>        <span class="op">|</span> fixed_major</span>
<span id="cb2-81"><a href="#cb2-81" aria-hidden="true" tabindex="-1"></a>    ).astype(<span class="bu">int</span>)</span>
<span id="cb2-82"><a href="#cb2-82" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb2-83"><a href="#cb2-83" aria-hidden="true" tabindex="-1"></a>    bike[<span class="st">'major_holiday'</span>] <span class="op">=</span> (bike[<span class="st">'dteday'</span>].isin(federal_holidays) <span class="op">|</span> fixed_major).astype(<span class="bu">int</span>)</span>
<span id="cb2-84"><a href="#cb2-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-85"><a href="#cb2-85" aria-hidden="true" tabindex="-1"></a><span class="co"># -----------------------------</span></span>
<span id="cb2-86"><a href="#cb2-86" aria-hidden="true" tabindex="-1"></a><span class="co"># Quick sanity check</span></span>
<span id="cb2-87"><a href="#cb2-87" aria-hidden="true" tabindex="-1"></a><span class="co"># -----------------------------</span></span>
<span id="cb2-88"><a href="#cb2-88" aria-hidden="true" tabindex="-1"></a>cols <span class="op">=</span> [<span class="st">'dteday'</span>, <span class="st">'covid_lockdown'</span>, <span class="st">'gov_shutdown'</span>, <span class="st">'big_event'</span>, <span class="st">'major_holiday'</span>]</span>
<span id="cb2-89"><a href="#cb2-89" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(bike[cols].head(<span class="dv">10</span>))</span>
<span id="cb2-90"><a href="#cb2-90" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Counts:</span><span class="ch">\n</span><span class="st">"</span>, bike[cols[<span class="dv">1</span>:]].<span class="bu">sum</span>())</span>
<span id="cb2-91"><a href="#cb2-91" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(bike)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>      dteday  covid_lockdown  gov_shutdown  big_event  major_holiday
0 2011-01-01               0             0          0              1
1 2011-01-01               0             0          0              1
2 2011-01-01               0             0          0              1
3 2011-01-01               0             0          0              1
4 2011-01-01               0             0          0              1
5 2011-01-01               0             0          0              1
6 2011-01-01               0             0          0              1
7 2011-01-01               0             0          0              1
8 2011-01-01               0             0          0              1
9 2011-01-01               0             0          0              1

Counts:
 covid_lockdown    1416
gov_shutdown      1320
big_event          384
major_holiday     3384
dtype: int64
           dteday    hr  casual  registered  temp_c  feels_like_c     hum  \
0      2011-01-01   0.0       3          13     3.0           3.0  0.7957   
1      2011-01-01   1.0       8          30     1.7           1.7  0.8272   
2      2011-01-01   2.0       5          26     1.9           1.9  0.8157   
3      2011-01-01   3.0       3           9     2.5           2.5  0.7831   
4      2011-01-01   4.0       0           1     2.0           2.0  0.8075   
...           ...   ...     ...         ...     ...           ...     ...   
112470 2023-10-31  19.0     241         594    10.2          10.2  0.4516   
112471 2023-10-31  20.0     171         450     8.9           7.5  0.5268   
112472 2023-10-31  21.0     176         402     7.7           6.4  0.5756   
112473 2023-10-31  22.0     106         257     8.0           8.0  0.5604   
112474 2023-10-31  23.0      78         135     6.5           6.5  0.6401   

        windspeed  weathersit  season  holiday  workingday  covid_lockdown  \
0             0.8           1       1        0           0               0   
1             0.8           1       1        0           0               0   
2             1.1           1       1        0           0               0   
3             0.8           1       1        0           0               0   
4             1.1           1       1        0           0               0   
...           ...         ...     ...      ...         ...             ...   
112470        8.4           2       4        0           1               0   
112471        9.3           1       4        0           1               0   
112472        7.8           1       4        0           1               0   
112473        0.0           1       4        0           1               0   
112474        4.5           1       4        0           1               0   

        gov_shutdown  big_event  major_holiday  
0                  0          0              1  
1                  0          0              1  
2                  0          0              1  
3                  0          0              1  
4                  0          0              1  
...              ...        ...            ...  
112470             0          0              0  
112471             0          0              0  
112472             0          0              0  
112473             0          0              0  
112474             0          0              0  

[112475 rows x 16 columns]</code></pre>
</div>
</div>
<div id="cell-3" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;colab&quot;,&quot;value&quot;:{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}}" data-outputid="fc977fdb-bbaa-49e0-ac53-9a1710d6c094" data-execution_count="49">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>bike[<span class="st">'dteday'</span>] <span class="op">=</span> pd.to_datetime(bike[<span class="st">'dteday'</span>])</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>bike[<span class="st">'date'</span>] <span class="op">=</span> bike[<span class="st">'dteday'</span>].dt.date</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># print(bike[['dteday', 'date']].head())</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>bike[<span class="st">'dteday'</span>] <span class="op">=</span> pd.to_datetime(bike[<span class="st">'dteday'</span>])</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>bike[<span class="st">'date'</span>] <span class="op">=</span> bike[<span class="st">'dteday'</span>].dt.date</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co"># print(bike[['dteday', 'date']].head())</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>bike <span class="op">=</span> pd.read_csv(<span class="st">'https://raw.githubusercontent.com/byui-cse/cse450-course/master/data/bikes.csv'</span>)</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>bike[<span class="st">'dteday'</span>] <span class="op">=</span> pd.to_datetime(bike[<span class="st">'dteday'</span>])</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>bike[<span class="st">'date'</span>] <span class="op">=</span> bike[<span class="st">'dteday'</span>].dt.date</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="co"># print(bike[['dteday', 'date']].head())</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>daily_bike_data <span class="op">=</span> bike.groupby(<span class="st">'date'</span>).agg(</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>    casual<span class="op">=</span>(<span class="st">'casual'</span>, <span class="st">'sum'</span>),</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>    registered<span class="op">=</span>(<span class="st">'registered'</span>, <span class="st">'sum'</span>),</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>    temp_c<span class="op">=</span>(<span class="st">'temp_c'</span>, <span class="st">'mean'</span>),</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>    feels_like_c<span class="op">=</span>(<span class="st">'feels_like_c'</span>, <span class="st">'mean'</span>),</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>    hum<span class="op">=</span>(<span class="st">'hum'</span>, <span class="st">'mean'</span>),</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>    windspeed<span class="op">=</span>(<span class="st">'windspeed'</span>, <span class="st">'mean'</span>),</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>    weathersit<span class="op">=</span>(<span class="st">'weathersit'</span>, <span class="st">'first'</span>),</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>    season<span class="op">=</span>(<span class="st">'season'</span>, <span class="st">'first'</span>),</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>    holiday<span class="op">=</span>(<span class="st">'holiday'</span>, <span class="st">'first'</span>),</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>    workingday<span class="op">=</span>(<span class="st">'workingday'</span>, <span class="st">'first'</span>)</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>).reset_index()</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>daily_bike_data[<span class="st">'day_of_week'</span>] <span class="op">=</span> pd.to_datetime(daily_bike_data[<span class="st">'date'</span>]).dt.day_name()</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(daily_bike_data.head())</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>         date  casual  registered    temp_c  feels_like_c       hum  \
0  2011-01-01     330         629  8.137500      7.970833  0.823567   
1  2011-01-02     130         651  9.204167      7.429167  0.704825   
2  2011-01-03     120        1181  0.558333     -3.729167  0.443213   
3  2011-01-04     107        1429  0.550000     -2.350000  0.603488   
4  2011-01-05      82        1489  2.237500     -0.891667  0.439533   

   windspeed  weathersit  season  holiday  workingday day_of_week  
0  10.754167           1       1        0           0    Saturday  
1  16.783333           2       1        0           0      Sunday  
2  16.750000           1       1        0           1      Monday  
3  10.095833           1       1        0           1     Tuesday  
4  12.700000           1       1        0           1   Wednesday  </code></pre>
</div>
</div>
<div id="cell-4" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;colab&quot;,&quot;value&quot;:{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:399}}" data-outputid="c2c8cabf-3843-497e-c642-dcdc0ee34c84" data-execution_count="50">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>bike.head()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="50">
<div id="df-43db6d27-39e9-42ff-80b6-81c6bc4726a7" class="colab-df-container">
    <div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">dteday</th>
<th data-quarto-table-cell-role="th">hr</th>
<th data-quarto-table-cell-role="th">casual</th>
<th data-quarto-table-cell-role="th">registered</th>
<th data-quarto-table-cell-role="th">temp_c</th>
<th data-quarto-table-cell-role="th">feels_like_c</th>
<th data-quarto-table-cell-role="th">hum</th>
<th data-quarto-table-cell-role="th">windspeed</th>
<th data-quarto-table-cell-role="th">weathersit</th>
<th data-quarto-table-cell-role="th">season</th>
<th data-quarto-table-cell-role="th">holiday</th>
<th data-quarto-table-cell-role="th">workingday</th>
<th data-quarto-table-cell-role="th">date</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>2011-01-01</td>
<td>0.0</td>
<td>3</td>
<td>13</td>
<td>3.0</td>
<td>3.0</td>
<td>0.7957</td>
<td>0.8</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>2011-01-01</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>2011-01-01</td>
<td>1.0</td>
<td>8</td>
<td>30</td>
<td>1.7</td>
<td>1.7</td>
<td>0.8272</td>
<td>0.8</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>2011-01-01</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>2011-01-01</td>
<td>2.0</td>
<td>5</td>
<td>26</td>
<td>1.9</td>
<td>1.9</td>
<td>0.8157</td>
<td>1.1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>2011-01-01</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>2011-01-01</td>
<td>3.0</td>
<td>3</td>
<td>9</td>
<td>2.5</td>
<td>2.5</td>
<td>0.7831</td>
<td>0.8</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>2011-01-01</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>2011-01-01</td>
<td>4.0</td>
<td>0</td>
<td>1</td>
<td>2.0</td>
<td>2.0</td>
<td>0.8075</td>
<td>1.1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>2011-01-01</td>
</tr>
</tbody>
</table>

</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-43db6d27-39e9-42ff-80b6-81c6bc4726a7')" title="Convert this dataframe to an interactive table." style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewbox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"></path>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-43db6d27-39e9-42ff-80b6-81c6bc4726a7 button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-43db6d27-39e9-42ff-80b6-81c6bc4726a7');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>


    </div>
  </div>
</div>
</div>
<div id="cell-7" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;colab&quot;,&quot;value&quot;:{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:533}}" data-outputid="16593864-0a37-410b-be8c-ed694e0ee4a5" data-execution_count="51">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Group by holiday and sum casual and registered bike usage</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>holiday_bike_usage <span class="op">=</span> daily_bike_data.groupby(<span class="st">'holiday'</span>)[[<span class="st">'casual'</span>, <span class="st">'registered'</span>]].<span class="bu">sum</span>().reset_index()</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate total riders for each holiday category</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>holiday_bike_usage[<span class="st">'total'</span>] <span class="op">=</span> holiday_bike_usage[<span class="st">'casual'</span>] <span class="op">+</span> holiday_bike_usage[<span class="st">'registered'</span>]</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate proportions</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>holiday_bike_usage[<span class="st">'casual_proportion'</span>] <span class="op">=</span> holiday_bike_usage[<span class="st">'casual'</span>] <span class="op">/</span> holiday_bike_usage[<span class="st">'total'</span>]</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>holiday_bike_usage[<span class="st">'registered_proportion'</span>] <span class="op">=</span> holiday_bike_usage[<span class="st">'registered'</span>] <span class="op">/</span> holiday_bike_usage[<span class="st">'total'</span>]</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Melt the DataFrame for easier plotting with seaborn, now with proportions</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>holiday_bike_usage_melted <span class="op">=</span> holiday_bike_usage.melt(id_vars<span class="op">=</span><span class="st">'holiday'</span>, value_vars<span class="op">=</span>[<span class="st">'casual_proportion'</span>, <span class="st">'registered_proportion'</span>], var_name<span class="op">=</span><span class="st">'user_type'</span>, value_name<span class="op">=</span><span class="st">'proportion_of_riders'</span>)</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Rename user_type for better legend labels</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>holiday_bike_usage_melted[<span class="st">'user_type'</span>] <span class="op">=</span> holiday_bike_usage_melted[<span class="st">'user_type'</span>].replace({</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">'casual_proportion'</span>: <span class="st">'Casual Riders'</span>,</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">'registered_proportion'</span>: <span class="st">'Registered Riders'</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the bar plot</span></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>sns.barplot(x<span class="op">=</span><span class="st">'holiday'</span>, y<span class="op">=</span><span class="st">'proportion_of_riders'</span>, hue<span class="op">=</span><span class="st">'user_type'</span>, data<span class="op">=</span>holiday_bike_usage_melted, palette<span class="op">=</span><span class="st">'viridis'</span>)</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Customize the plot</span></span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Proportion of Bike Usage: Regular Days vs. Holidays'</span>)</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Day Type (0 = Regular Day, 1 = Holiday)'</span>)</span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Proportion of Riders'</span>)</span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>plt.xticks(ticks<span class="op">=</span>[<span class="dv">0</span>, <span class="dv">1</span>], labels<span class="op">=</span>[<span class="st">'Regular Day'</span>, <span class="st">'Holiday'</span>])</span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>plt.legend(title<span class="op">=</span><span class="st">'User Type'</span>)</span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>plt.grid(axis<span class="op">=</span><span class="st">'y'</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, alpha<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="starter_bikes_files/figure-html/cell-8-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>This bar chart visually compares the total number of casual and registered bike riders on regular days versus holidays. You can see how the usage patterns differ between these two categories.</p>
<section id="task" class="level1">
<h1>Task</h1>
<p>Add a ‘total_riders’ column to the <code>daily_bike_data</code> DataFrame by summing ‘casual’ and ‘registered’ users, then create a combined bar and line chart showing daily total riders as bars, with overlaid lines for casual and registered users, and finally summarize the observed trends in bike usage.</p>
<section id="calculate-total-riders" class="level2">
<h2 class="anchored" data-anchor-id="calculate-total-riders">Calculate Total Riders</h2>
<section id="subtask" class="level3">
<h3 class="anchored" data-anchor-id="subtask">Subtask:</h3>
<p>Add a ‘total_riders’ column to the <code>daily_bike_data</code> DataFrame by summing the ‘casual’ and ‘registered’ columns. This will be used for the bar chart.</p>
<p><strong>Reasoning</strong>: To complete the subtask, I will add a new column ‘total_riders’ to the <code>daily_bike_data</code> DataFrame by summing the ‘casual’ and ‘registered’ columns. Then, I will display the head of the DataFrame to verify the new column.</p>
<div id="cell-13" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;colab&quot;,&quot;value&quot;:{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}}" data-outputid="e4a45dd6-be37-4bbd-c987-0744821304ea" data-execution_count="52">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>daily_bike_data[<span class="st">'total_riders'</span>] <span class="op">=</span> daily_bike_data[<span class="st">'casual'</span>] <span class="op">+</span> daily_bike_data[<span class="st">'registered'</span>]</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(daily_bike_data.head())</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>         date  casual  registered    temp_c  feels_like_c       hum  \
0  2011-01-01     330         629  8.137500      7.970833  0.823567   
1  2011-01-02     130         651  9.204167      7.429167  0.704825   
2  2011-01-03     120        1181  0.558333     -3.729167  0.443213   
3  2011-01-04     107        1429  0.550000     -2.350000  0.603488   
4  2011-01-05      82        1489  2.237500     -0.891667  0.439533   

   windspeed  weathersit  season  holiday  workingday day_of_week  \
0  10.754167           1       1        0           0    Saturday   
1  16.783333           2       1        0           0      Sunday   
2  16.750000           1       1        0           1      Monday   
3  10.095833           1       1        0           1     Tuesday   
4  12.700000           1       1        0           1   Wednesday   

   total_riders  
0           959  
1           781  
2          1301  
3          1536  
4          1571  </code></pre>
</div>
</div>
</section>
</section>
<section id="create-combined-bar-and-line-chart" class="level2">
<h2 class="anchored" data-anchor-id="create-combined-bar-and-line-chart">Create Combined Bar and Line Chart</h2>
<section id="subtask-1" class="level3">
<h3 class="anchored" data-anchor-id="subtask-1">Subtask:</h3>
<p>Generate a plot where bars represent the ‘total_riders’ from <code>daily_bike_data</code> for each day, and overlaid lines show the ‘casual’ users (green) and ‘registered’ users (blue) over the same period. Ensure proper labeling for axes and a title for the chart.</p>
<p><strong>Reasoning</strong>: I need to generate a combined bar and line chart as described in the subtask. This involves creating a bar plot for total riders and overlaying line plots for casual and registered riders on a secondary y-axis. I will use <code>matplotlib.pyplot</code> and <code>seaborn</code> to achieve this, ensuring all labels, titles, and legends are correctly placed.</p>
<div id="cell-16" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;colab&quot;,&quot;value&quot;:{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:476}}" data-outputid="c36b89b0-a17e-4d5e-e7cb-0cafb8c55342" data-execution_count="53">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.dates <span class="im">as</span> mdates</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure 'date' column is in datetime format for proper plotting</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>daily_bike_data[<span class="st">'date'</span>] <span class="op">=</span> pd.to_datetime(daily_bike_data[<span class="st">'date'</span>])</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a figure and a set of subplots</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>fig, ax1 <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">15</span>, <span class="dv">8</span>))</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert dates to numerical format so both bar and line plots share the same continuous date axis</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>dates_numeric <span class="op">=</span> mdates.date2num(daily_bike_data[<span class="st">'date'</span>])</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot total_riders as a bar chart on ax1 using numerical dates</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>bar_width <span class="op">=</span> <span class="fl">0.8</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>ax1.bar(dates_numeric, daily_bike_data[<span class="st">'total_riders'</span>], width<span class="op">=</span>bar_width, color<span class="op">=</span><span class="st">'#cccccc'</span>, label<span class="op">=</span><span class="st">'Total Riders'</span>, align<span class="op">=</span><span class="st">'center'</span>)</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a second y-axis that shares the same x-axis as ax1</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>ax2 <span class="op">=</span> ax1.twinx()</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot casual riders as a green line on ax2</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>ax2.plot(dates_numeric, daily_bike_data[<span class="st">'casual'</span>], color<span class="op">=</span><span class="st">'green'</span>, label<span class="op">=</span><span class="st">'Casual Riders'</span>, linewidth<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot registered riders as a blue line on ax2</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>ax2.plot(dates_numeric, daily_bike_data[<span class="st">'registered'</span>], color<span class="op">=</span><span class="st">'blue'</span>, label<span class="op">=</span><span class="st">'Registered Riders'</span>, linewidth<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the title of the chart</span></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Daily Bike Usage: Total, Casual, and Registered Riders'</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Set x-axis label for ax1</span></span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a>ax1.set_xlabel(<span class="st">'Date'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Set y-axis label for ax1</span></span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a>ax1.set_ylabel(<span class="st">'Total Riders'</span>, color<span class="op">=</span><span class="st">'#cccccc'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a>ax1.tick_params(axis<span class="op">=</span><span class="st">'y'</span>, labelcolor<span class="op">=</span><span class="st">'#cccccc'</span>)</span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Set y-axis label for ax2</span></span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a>ax2.set_ylabel(<span class="st">'Number of Casual/Registered Riders'</span>, color<span class="op">=</span><span class="st">'black'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Format the x-axis to display dates properly</span></span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a>ax1.xaxis.set_major_formatter(mdates.DateFormatter(<span class="st">'%Y-%m-</span><span class="sc">%d</span><span class="st">'</span>))</span>
<span id="cb10-42"><a href="#cb10-42" aria-hidden="true" tabindex="-1"></a>ax1.xaxis.set_major_locator(mdates.AutoDateLocator())</span>
<span id="cb10-43"><a href="#cb10-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-44"><a href="#cb10-44" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine legends from both axes</span></span>
<span id="cb10-45"><a href="#cb10-45" aria-hidden="true" tabindex="-1"></a>handles1, labels1 <span class="op">=</span> ax1.get_legend_handles_labels()</span>
<span id="cb10-46"><a href="#cb10-46" aria-hidden="true" tabindex="-1"></a>handles2, labels2 <span class="op">=</span> ax2.get_legend_handles_labels()</span>
<span id="cb10-47"><a href="#cb10-47" aria-hidden="true" tabindex="-1"></a>ax2.legend(handles1 <span class="op">+</span> handles2, labels1 <span class="op">+</span> labels2, loc<span class="op">=</span><span class="st">'upper left'</span>, fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb10-48"><a href="#cb10-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-49"><a href="#cb10-49" aria-hidden="true" tabindex="-1"></a><span class="co"># Rotate x-axis labels if they overlap to improve readability</span></span>
<span id="cb10-50"><a href="#cb10-50" aria-hidden="true" tabindex="-1"></a>fig.autofmt_xdate()</span>
<span id="cb10-51"><a href="#cb10-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-52"><a href="#cb10-52" aria-hidden="true" tabindex="-1"></a><span class="co"># Add grid for better readability</span></span>
<span id="cb10-53"><a href="#cb10-53" aria-hidden="true" tabindex="-1"></a>ax1.grid(<span class="va">True</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, alpha<span class="op">=</span><span class="fl">0.6</span>)</span>
<span id="cb10-54"><a href="#cb10-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-55"><a href="#cb10-55" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the plot</span></span>
<span id="cb10-56"><a href="#cb10-56" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb10-57"><a href="#cb10-57" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="starter_bikes_files/figure-html/cell-11-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p><strong>Reasoning</strong>: The previous code failed because <code>sns.barplot</code> likely coerced the ‘date’ column into a categorical type for the x-axis, which then caused a <code>TypeError</code> when <code>ax2.plot</code> tried to interpret the same ‘date’ column as a datetime object for plotting lines. To fix this, I will use <code>ax1.bar</code> instead of <code>sns.barplot</code> to plot the total riders, using the numerical representation of dates for the x-axis. This ensures that the x-axis is treated as a continuous datetime scale, allowing the line plots on <code>ax2</code> to render correctly without conflicts.</p>
<div id="cell-18" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;colab&quot;,&quot;value&quot;:{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:476}}" data-outputid="b493a9f3-f276-446f-c234-28a406e1708d" data-execution_count="54">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.dates <span class="im">as</span> mdates</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure 'date' column is in datetime format for proper plotting</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>daily_bike_data[<span class="st">'date'</span>] <span class="op">=</span> pd.to_datetime(daily_bike_data[<span class="st">'date'</span>])</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a figure and a set of subplots</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>fig, ax1 <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">15</span>, <span class="dv">8</span>))</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert dates to numerical format for plotting with plt.bar and plt.plot</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="co"># This ensures a continuous date axis consistent across both axes</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>dates_numeric <span class="op">=</span> mdates.date2num(daily_bike_data[<span class="st">'date'</span>])</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot total_riders as a bar chart on ax1 using numerical dates</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a><span class="co"># We need to set the width of the bars appropriately for daily data</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>bar_width <span class="op">=</span> <span class="fl">0.8</span> <span class="co"># Adjust as needed</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>ax1.bar(dates_numeric, daily_bike_data[<span class="st">'total_riders'</span>], width<span class="op">=</span>bar_width, color<span class="op">=</span><span class="st">'#cccccc'</span>, label<span class="op">=</span><span class="st">'Total Riders'</span>, align<span class="op">=</span><span class="st">'center'</span>)</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a second y-axis that shares the same x-axis as ax1</span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>ax2 <span class="op">=</span> ax1.twinx()</span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot casual riders as a green line on ax2 using numerical dates</span></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>ax2.plot(dates_numeric, daily_bike_data[<span class="st">'casual'</span>], color<span class="op">=</span><span class="st">'green'</span>, label<span class="op">=</span><span class="st">'Casual Riders'</span>, linewidth<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot registered riders as a blue line on ax2 using numerical dates</span></span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>ax2.plot(dates_numeric, daily_bike_data[<span class="st">'registered'</span>], color<span class="op">=</span><span class="st">'blue'</span>, label<span class="op">=</span><span class="st">'Registered Riders'</span>, linewidth<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the title of the chart</span></span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Daily Bike Usage: Total, Casual, and Registered Riders'</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Set x-axis label for ax1</span></span>
<span id="cb11-33"><a href="#cb11-33" aria-hidden="true" tabindex="-1"></a>ax1.set_xlabel(<span class="st">'Date'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb11-34"><a href="#cb11-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-35"><a href="#cb11-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Set y-axis label for ax1</span></span>
<span id="cb11-36"><a href="#cb11-36" aria-hidden="true" tabindex="-1"></a>ax1.set_ylabel(<span class="st">'Total Riders'</span>, color<span class="op">=</span><span class="st">'#555555'</span>, fontsize<span class="op">=</span><span class="dv">12</span>) <span class="co"># Adjusted color for visibility</span></span>
<span id="cb11-37"><a href="#cb11-37" aria-hidden="true" tabindex="-1"></a>ax1.tick_params(axis<span class="op">=</span><span class="st">'y'</span>, labelcolor<span class="op">=</span><span class="st">'#555555'</span>)</span>
<span id="cb11-38"><a href="#cb11-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-39"><a href="#cb11-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Set y-axis label for ax2</span></span>
<span id="cb11-40"><a href="#cb11-40" aria-hidden="true" tabindex="-1"></a>ax2.set_ylabel(<span class="st">'Number of Casual/Registered Riders'</span>, color<span class="op">=</span><span class="st">'black'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb11-41"><a href="#cb11-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-42"><a href="#cb11-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Format the x-axis to display dates properly</span></span>
<span id="cb11-43"><a href="#cb11-43" aria-hidden="true" tabindex="-1"></a>ax1.xaxis.set_major_formatter(mdates.DateFormatter(<span class="st">'%Y-%m-</span><span class="sc">%d</span><span class="st">'</span>))</span>
<span id="cb11-44"><a href="#cb11-44" aria-hidden="true" tabindex="-1"></a>ax1.xaxis.set_major_locator(mdates.AutoDateLocator())</span>
<span id="cb11-45"><a href="#cb11-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-46"><a href="#cb11-46" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine legends from both axes</span></span>
<span id="cb11-47"><a href="#cb11-47" aria-hidden="true" tabindex="-1"></a>handles1, labels1 <span class="op">=</span> ax1.get_legend_handles_labels()</span>
<span id="cb11-48"><a href="#cb11-48" aria-hidden="true" tabindex="-1"></a>handles2, labels2 <span class="op">=</span> ax2.get_legend_handles_labels()</span>
<span id="cb11-49"><a href="#cb11-49" aria-hidden="true" tabindex="-1"></a>ax2.legend(handles1 <span class="op">+</span> handles2, labels1 <span class="op">+</span> labels2, loc<span class="op">=</span><span class="st">'upper left'</span>, fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb11-50"><a href="#cb11-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-51"><a href="#cb11-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Rotate x-axis labels if they overlap to improve readability</span></span>
<span id="cb11-52"><a href="#cb11-52" aria-hidden="true" tabindex="-1"></a>fig.autofmt_xdate()</span>
<span id="cb11-53"><a href="#cb11-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-54"><a href="#cb11-54" aria-hidden="true" tabindex="-1"></a><span class="co"># Add grid for better readability</span></span>
<span id="cb11-55"><a href="#cb11-55" aria-hidden="true" tabindex="-1"></a>ax1.grid(<span class="va">True</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, alpha<span class="op">=</span><span class="fl">0.6</span>)</span>
<span id="cb11-56"><a href="#cb11-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-57"><a href="#cb11-57" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the plot</span></span>
<span id="cb11-58"><a href="#cb11-58" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb11-59"><a href="#cb11-59" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="starter_bikes_files/figure-html/cell-12-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="final-task" class="level2">
<h2 class="anchored" data-anchor-id="final-task">Final Task</h2>
<section id="subtask-2" class="level3">
<h3 class="anchored" data-anchor-id="subtask-2">Subtask:</h3>
<p>Summarize the insights observed from the combined bar and line chart, highlighting trends in casual, registered, and total bike usage over time.</p>
</section>
</section>
<section id="summary" class="level2">
<h2 class="anchored" data-anchor-id="summary">Summary:</h2>
<section id="qa" class="level3">
<h3 class="anchored" data-anchor-id="qa">Q&amp;A</h3>
<p>The combined bar and line chart reveals distinct trends in casual, registered, and total bike usage over time. Registered users consistently form the majority of riders and show a much higher usage volume compared to casual users. Both casual and registered riders exhibit a clear seasonal pattern, with usage generally lower in colder months (e.g., early 2011) and significantly higher during warmer periods. Total ridership, driven primarily by registered users, mirrors this seasonal trend.</p>
</section>
<section id="data-analysis-key-findings" class="level3">
<h3 class="anchored" data-anchor-id="data-analysis-key-findings">Data Analysis Key Findings</h3>
<ul>
<li>A <code>total_riders</code> column was successfully added to the <code>daily_bike_data</code> DataFrame by summing ‘casual’ and ‘registered’ users. For example, on 2011-01-01, there were 330 casual and 629 registered riders, totaling 959 riders.</li>
<li>The generated chart clearly illustrates that <code>registered</code> riders (<code>blue line</code>) significantly outnumber <code>casual</code> riders (<code>green line</code>) throughout the observed period.</li>
<li>Both <code>casual</code> and <code>registered</code> rider numbers, and consequently <code>total_riders</code> (<code>grey bars</code>), demonstrate a strong seasonal pattern, with usage peaking during warmer months and declining during colder periods.</li>
<li>The <code>total_riders</code> bar height closely follows the <code>registered</code> riders line, indicating that registered users are the primary drivers of overall daily bike usage.</li>
</ul>
</section>
<section id="insights-or-next-steps" class="level3">
<h3 class="anchored" data-anchor-id="insights-or-next-steps">Insights or Next Steps</h3>
<ul>
<li><strong>Targeted Marketing Opportunities:</strong> Given the dominance of registered users, efforts could be focused on retaining and expanding this group through loyalty programs or incentives. For casual users, understanding what barriers prevent them from registering could unlock growth.</li>
<li><strong>Seasonal Operational Adjustments:</strong> The clear seasonal trend suggests that resource allocation (e.g., bike availability, maintenance, staffing) could be optimized to match demand fluctuations, with higher capacity planned for peak seasons and reduced operations during off-peak times.</li>
</ul>
</section>
</section>
</section>
<section id="task-1" class="level1">
<h1>Task</h1>
<p>Prepare the <code>bike</code> DataFrame for hourly analysis by converting the ‘dteday’ column to datetime objects (if not already done), extracting the ‘day_of_week’ from ‘dteday’, and then aggregating ‘casual’ and ‘registered’ bike usage by ‘day_of_week’ and ‘hr’ to summarize total usage for each hour of each day.</p>
<section id="prepare-data-for-hourly-analysis" class="level2">
<h2 class="anchored" data-anchor-id="prepare-data-for-hourly-analysis">Prepare Data for Hourly Analysis</h2>
<section id="subtask-3" class="level3">
<h3 class="anchored" data-anchor-id="subtask-3">Subtask:</h3>
<p>Convert the ‘dteday’ column in the <code>bike</code> DataFrame to datetime objects, then extract the ‘day_of_week’ to enable hourly and daily analysis.</p>
<p><strong>Reasoning</strong>: First, I’ll convert the ‘dteday’ column to datetime objects to ensure consistency and then extract the ‘day_of_week’ to a new column as instructed. Finally, I will display the head of the DataFrame to verify the changes.</p>
<div id="cell-24" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;colab&quot;,&quot;value&quot;:{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}}" data-outputid="96885590-2a0c-4bdf-ce47-17ce68523aad" data-execution_count="55">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>bike[<span class="st">'dteday'</span>] <span class="op">=</span> pd.to_datetime(bike[<span class="st">'dteday'</span>])</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>bike[<span class="st">'day_of_week'</span>] <span class="op">=</span> bike[<span class="st">'dteday'</span>].dt.day_name()</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(bike.head())</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>      dteday   hr  casual  registered  temp_c  feels_like_c     hum  \
0 2011-01-01  0.0       3          13     3.0           3.0  0.7957   
1 2011-01-01  1.0       8          30     1.7           1.7  0.8272   
2 2011-01-01  2.0       5          26     1.9           1.9  0.8157   
3 2011-01-01  3.0       3           9     2.5           2.5  0.7831   
4 2011-01-01  4.0       0           1     2.0           2.0  0.8075   

   windspeed  weathersit  season  holiday  workingday        date day_of_week  
0        0.8           1       1        0           0  2011-01-01    Saturday  
1        0.8           1       1        0           0  2011-01-01    Saturday  
2        1.1           1       1        0           0  2011-01-01    Saturday  
3        0.8           1       1        0           0  2011-01-01    Saturday  
4        1.1           1       1        0           0  2011-01-01    Saturday  </code></pre>
</div>
</div>
</section>
</section>
<section id="aggregate-hourly-bike-usage" class="level2">
<h2 class="anchored" data-anchor-id="aggregate-hourly-bike-usage">Aggregate Hourly Bike Usage</h2>
<section id="subtask-4" class="level3">
<h3 class="anchored" data-anchor-id="subtask-4">Subtask:</h3>
<p>Group the <code>bike</code> DataFrame by ‘day_of_week’ and ‘hr’, and then sum the ‘casual’ and ‘registered’ columns to get the total usage for each hour of each day of the week.</p>
<p><strong>Reasoning</strong>: To complete the subtask, I will group the <code>bike</code> DataFrame by ‘day_of_week’ and ‘hr’, calculate the sum of ‘casual’ and ‘registered’ riders, reset the index, and store the result in <code>hourly_bike_usage</code>.</p>
<div id="cell-27" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;colab&quot;,&quot;value&quot;:{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}}" data-outputid="8a420ef9-612a-4d15-a55a-f62f65f3ec70" data-execution_count="56">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>hourly_bike_usage <span class="op">=</span> bike.groupby([<span class="st">'day_of_week'</span>, <span class="st">'hr'</span>]).agg(</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    casual<span class="op">=</span>(<span class="st">'casual'</span>, <span class="st">'sum'</span>),</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    registered<span class="op">=</span>(<span class="st">'registered'</span>, <span class="st">'sum'</span>)</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>).reset_index()</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(hourly_bike_usage.head())</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>  day_of_week   hr  casual  registered
0      Friday  0.0   13673       34099
1      Friday  1.0    7443       16459
2      Friday  2.0    4240        8396
3      Friday  3.0    1993        4040
4      Friday  4.0    1891        6254</code></pre>
</div>
</div>
</section>
</section>
<section id="generate-hourly-bike-usage-line-charts" class="level2">
<h2 class="anchored" data-anchor-id="generate-hourly-bike-usage-line-charts">Generate Hourly Bike Usage Line Charts</h2>
<section id="subtask-5" class="level3">
<h3 class="anchored" data-anchor-id="subtask-5">Subtask:</h3>
<p>Create line charts showing casual and registered bike usage across hours, faceted by each day of the week, with different colored lines for casual and registered users. Ensure proper labeling for axes and a title for the chart.</p>
<p><strong>Reasoning</strong>: To create line charts showing casual and registered bike usage faceted by day of the week, I need to first prepare the data by melting the <code>hourly_bike_usage</code> DataFrame into a long format suitable for <code>seaborn.relplot</code>. Then, I will generate the plot with the specified parameters.</p>
<div id="cell-30" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;colab&quot;,&quot;value&quot;:{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:363}}" data-outputid="71a0d94e-3b5b-4b61-a4f7-6d927127edf0" data-execution_count="57">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the order of days for consistent plotting</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>day_order <span class="op">=</span> [<span class="st">'Monday'</span>, <span class="st">'Tuesday'</span>, <span class="st">'Wednesday'</span>, <span class="st">'Thursday'</span>, <span class="st">'Friday'</span>, <span class="st">'Saturday'</span>, <span class="st">'Sunday'</span>]</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert 'hr' to int type to remove '.0'</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>hourly_bike_usage[<span class="st">'hr'</span>] <span class="op">=</span> hourly_bike_usage[<span class="st">'hr'</span>].astype(<span class="bu">int</span>)</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Melt the DataFrame to long format for plotting casual and registered as separate lines</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>hourly_bike_usage_melted <span class="op">=</span> hourly_bike_usage.melt(</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>    id_vars<span class="op">=</span>[<span class="st">'day_of_week'</span>, <span class="st">'hr'</span>],</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>    value_vars<span class="op">=</span>[<span class="st">'casual'</span>, <span class="st">'registered'</span>],</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>    var_name<span class="op">=</span><span class="st">'user_type'</span>,</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>    value_name<span class="op">=</span><span class="st">'total_riders'</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the relplot</span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>g <span class="op">=</span> sns.relplot(</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>    data<span class="op">=</span>hourly_bike_usage_melted,</span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span><span class="st">'hr'</span>,</span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span><span class="st">'total_riders'</span>,</span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>    kind<span class="op">=</span><span class="st">'line'</span>,</span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>    col<span class="op">=</span><span class="st">'day_of_week'</span>,</span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>    col_order<span class="op">=</span>day_order,</span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>    hue<span class="op">=</span><span class="st">'user_type'</span>,</span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>    col_wrap<span class="op">=</span><span class="dv">4</span>,</span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>    height<span class="op">=</span><span class="fl">3.5</span>,</span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a>    aspect<span class="op">=</span><span class="fl">1.2</span>,</span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a>    palette<span class="op">=</span>{<span class="st">'casual'</span>: <span class="st">'green'</span>, <span class="st">'registered'</span>: <span class="st">'blue'</span>}</span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Set descriptive titles and labels</span></span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a>g.fig.suptitle(<span class="st">'Hourly Bike Usage by Day of Week'</span>, y<span class="op">=</span><span class="fl">1.02</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a>g.set_axis_labels(<span class="st">'Hour of Day'</span>, <span class="st">'Number of Riders'</span>)</span>
<span id="cb16-36"><a href="#cb16-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-37"><a href="#cb16-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjust x-axis ticks to show all hours clearly</span></span>
<span id="cb16-38"><a href="#cb16-38" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> ax <span class="kw">in</span> g.axes.flat:</span>
<span id="cb16-39"><a href="#cb16-39" aria-hidden="true" tabindex="-1"></a>    ax.set_xticks(<span class="bu">range</span>(<span class="dv">0</span>, <span class="dv">24</span>, <span class="dv">2</span>)) <span class="co"># Show every other hour</span></span>
<span id="cb16-40"><a href="#cb16-40" aria-hidden="true" tabindex="-1"></a>    ax.tick_params(axis<span class="op">=</span><span class="st">'x'</span>, rotation<span class="op">=</span><span class="dv">45</span>)</span>
<span id="cb16-41"><a href="#cb16-41" aria-hidden="true" tabindex="-1"></a>    ax.grid(<span class="va">True</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, alpha<span class="op">=</span><span class="fl">0.6</span>)</span>
<span id="cb16-42"><a href="#cb16-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-43"><a href="#cb16-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Improve layout</span></span>
<span id="cb16-44"><a href="#cb16-44" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb16-45"><a href="#cb16-45" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="starter_bikes_files/figure-html/cell-15-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="summarize-hourly-bike-usage-trends" class="level2">
<h2 class="anchored" data-anchor-id="summarize-hourly-bike-usage-trends">Summarize Hourly Bike Usage Trends</h2>
<section id="subtask-6" class="level3">
<h3 class="anchored" data-anchor-id="subtask-6">Subtask:</h3>
<p>Analyze and summarize the observed trends in casual and registered bike usage across different hours of the day and days of the week from the generated line charts.</p>
</section>
</section>
<section id="summary-1" class="level2">
<h2 class="anchored" data-anchor-id="summary-1">Summary:</h2>
<section id="qa-1" class="level3">
<h3 class="anchored" data-anchor-id="qa-1">Q&amp;A</h3>
<p>The analysis revealed distinct hourly bike usage trends for both casual and registered users across different days of the week. Registered users predominantly exhibit commuting patterns with morning and evening peaks on weekdays, while casual users show leisure-oriented usage with a broader midday to afternoon peak, particularly strong on weekends.</p>
</section>
<section id="data-analysis-key-findings-1" class="level3">
<h3 class="anchored" data-anchor-id="data-analysis-key-findings-1">Data Analysis Key Findings</h3>
<ul>
<li>The <code>bike</code> DataFrame was successfully prepared by converting the <code>dteday</code> column to datetime objects and extracting the <code>day_of_week</code> to facilitate hourly and daily usage analysis.</li>
<li>Hourly bike usage was aggregated by summing <code>casual</code> and <code>registered</code> riders for each hour of each day, creating a comprehensive <code>hourly_bike_usage</code> dataset. For example, on a Friday at hour 0, there were 13673 casual riders and 34099 registered riders.</li>
<li>The generated line charts revealed that <strong>registered users</strong> typically display a bimodal usage pattern on weekdays, with prominent peaks during morning (e.g., 7-9 AM) and evening (e.g., 5-7 PM) commuting hours. On weekends, their usage is generally lower and shows a single, broader peak, often in the afternoon.</li>
<li><strong>Casual users</strong> exhibit a more leisure-oriented unimodal pattern, with usage peaking broadly from midday to afternoon (e.g., 10 AM - 4 PM) on both weekdays and weekends. Their overall usage tends to be higher or more comparable to registered users during peak weekend leisure hours.</li>
<li>Overall, bike usage for both casual and registered riders is significantly lower during early morning hours (e.g., 1 AM - 5 AM) across all days of the week.</li>
</ul>
</section>
<section id="insights-or-next-steps-1" class="level3">
<h3 class="anchored" data-anchor-id="insights-or-next-steps-1">Insights or Next Steps</h3>
<ul>
<li>The observed distinct usage patterns between casual and registered riders and across weekdays/weekends can inform demand-side management strategies, such as dynamic pricing or promotional campaigns tailored to specific user types and times.</li>
<li>Further analysis could explore the impact of weather conditions, holidays, or special events on these hourly and daily usage trends to provide a more complete picture of demand drivers.</li>
</ul>
<div id="cell-33" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;colab&quot;,&quot;value&quot;:{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:617}}" data-outputid="c5612500-ab5d-4bca-9b35-cd17a246e98b" data-execution_count="58">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>bike</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="58">
<div id="df-b64028b2-82b3-46d5-b3ef-34edfb7cf885" class="colab-df-container">
    <div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">dteday</th>
<th data-quarto-table-cell-role="th">hr</th>
<th data-quarto-table-cell-role="th">casual</th>
<th data-quarto-table-cell-role="th">registered</th>
<th data-quarto-table-cell-role="th">temp_c</th>
<th data-quarto-table-cell-role="th">feels_like_c</th>
<th data-quarto-table-cell-role="th">hum</th>
<th data-quarto-table-cell-role="th">windspeed</th>
<th data-quarto-table-cell-role="th">weathersit</th>
<th data-quarto-table-cell-role="th">season</th>
<th data-quarto-table-cell-role="th">holiday</th>
<th data-quarto-table-cell-role="th">workingday</th>
<th data-quarto-table-cell-role="th">date</th>
<th data-quarto-table-cell-role="th">day_of_week</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>2011-01-01</td>
<td>0.0</td>
<td>3</td>
<td>13</td>
<td>3.0</td>
<td>3.0</td>
<td>0.7957</td>
<td>0.8</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>2011-01-01</td>
<td>Saturday</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>2011-01-01</td>
<td>1.0</td>
<td>8</td>
<td>30</td>
<td>1.7</td>
<td>1.7</td>
<td>0.8272</td>
<td>0.8</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>2011-01-01</td>
<td>Saturday</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>2011-01-01</td>
<td>2.0</td>
<td>5</td>
<td>26</td>
<td>1.9</td>
<td>1.9</td>
<td>0.8157</td>
<td>1.1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>2011-01-01</td>
<td>Saturday</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>2011-01-01</td>
<td>3.0</td>
<td>3</td>
<td>9</td>
<td>2.5</td>
<td>2.5</td>
<td>0.7831</td>
<td>0.8</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>2011-01-01</td>
<td>Saturday</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>2011-01-01</td>
<td>4.0</td>
<td>0</td>
<td>1</td>
<td>2.0</td>
<td>2.0</td>
<td>0.8075</td>
<td>1.1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>2011-01-01</td>
<td>Saturday</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">...</th>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">112470</th>
<td>2023-10-31</td>
<td>19.0</td>
<td>241</td>
<td>594</td>
<td>10.2</td>
<td>10.2</td>
<td>0.4516</td>
<td>8.4</td>
<td>2</td>
<td>4</td>
<td>0</td>
<td>1</td>
<td>2023-10-31</td>
<td>Tuesday</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">112471</th>
<td>2023-10-31</td>
<td>20.0</td>
<td>171</td>
<td>450</td>
<td>8.9</td>
<td>7.5</td>
<td>0.5268</td>
<td>9.3</td>
<td>1</td>
<td>4</td>
<td>0</td>
<td>1</td>
<td>2023-10-31</td>
<td>Tuesday</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">112472</th>
<td>2023-10-31</td>
<td>21.0</td>
<td>176</td>
<td>402</td>
<td>7.7</td>
<td>6.4</td>
<td>0.5756</td>
<td>7.8</td>
<td>1</td>
<td>4</td>
<td>0</td>
<td>1</td>
<td>2023-10-31</td>
<td>Tuesday</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">112473</th>
<td>2023-10-31</td>
<td>22.0</td>
<td>106</td>
<td>257</td>
<td>8.0</td>
<td>8.0</td>
<td>0.5604</td>
<td>0.0</td>
<td>1</td>
<td>4</td>
<td>0</td>
<td>1</td>
<td>2023-10-31</td>
<td>Tuesday</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">112474</th>
<td>2023-10-31</td>
<td>23.0</td>
<td>78</td>
<td>135</td>
<td>6.5</td>
<td>6.5</td>
<td>0.6401</td>
<td>4.5</td>
<td>1</td>
<td>4</td>
<td>0</td>
<td>1</td>
<td>2023-10-31</td>
<td>Tuesday</td>
</tr>
</tbody>
</table>

<p>112475 rows × 14 columns</p>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-b64028b2-82b3-46d5-b3ef-34edfb7cf885')" title="Convert this dataframe to an interactive table." style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewbox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"></path>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-b64028b2-82b3-46d5-b3ef-34edfb7cf885 button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-b64028b2-82b3-46d5-b3ef-34edfb7cf885');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>


  <div id="id_86fe33f9-a406-4d15-bde0-159d8a07b38d">
    <style>
      .colab-df-generate {
        background-color: #E8F0FE;
        border: none;
        border-radius: 50%;
        cursor: pointer;
        display: none;
        fill: #1967D2;
        height: 32px;
        padding: 0 0 0 0;
        width: 32px;
      }

      .colab-df-generate:hover {
        background-color: #E2EBFA;
        box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
        fill: #174EA6;
      }

      [theme=dark] .colab-df-generate {
        background-color: #3B4455;
        fill: #D2E3FC;
      }

      [theme=dark] .colab-df-generate:hover {
        background-color: #434B5C;
        box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
        filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
        fill: #FFFFFF;
      }
    </style>
    <button class="colab-df-generate" onclick="generateWithVariable('bike')" title="Generate code using this dataframe." style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewbox="0 0 24 24" width="24px">
    <path d="M7,19H8.4L18.45,9,17,7.55,7,17.6ZM5,21V16.75L18.45,3.32a2,2,0,0,1,2.83,0l1.4,1.43a1.91,1.91,0,0,1,.58,1.4,1.91,1.91,0,0,1-.58,1.4L9.25,21ZM18.45,9,17,7.55Zm-12,3A5.31,5.31,0,0,0,4.9,8.1,5.31,5.31,0,0,0,1,6.5,5.31,5.31,0,0,0,4.9,4.9,5.31,5.31,0,0,0,6.5,1,5.31,5.31,0,0,0,8.1,4.9,5.31,5.31,0,0,0,12,6.5,5.46,5.46,0,0,0,6.5,12Z"></path>
  </svg>
    </button>
    <script>
      (() => {
      const buttonEl =
        document.querySelector('#id_86fe33f9-a406-4d15-bde0-159d8a07b38d button.colab-df-generate');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      buttonEl.onclick = () => {
        google.colab.notebook.generateWithVariable('bike');
      }
      })();
    </script>
  </div>

    </div>
  </div>
</div>
</div>
<div id="cell-34" class="cell" data-outputid="719a7ca8-7b14-4b2c-a18f-3e8662d6450b" data-quarto-private-1="{&quot;key&quot;:&quot;colab&quot;,&quot;value&quot;:{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:779}}" data-execution_count="59">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> google.colab <span class="im">import</span> files</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pandas.tseries.holiday <span class="im">import</span> USFederalHolidayCalendar</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># ── Re-add all engineered features ──────────────────────────────────────</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>bike[<span class="st">'dteday'</span>] <span class="op">=</span> pd.to_datetime(bike[<span class="st">'dteday'</span>])</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>min_day <span class="op">=</span> bike[<span class="st">'dteday'</span>].<span class="bu">min</span>()</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>max_day <span class="op">=</span> bike[<span class="st">'dteday'</span>].<span class="bu">max</span>()</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 1) covid_lockdown</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>covid_lockdown_ranges <span class="op">=</span> [(<span class="st">'2020-04-01'</span>, <span class="st">'2021-07-25'</span>)]</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>bike[<span class="st">'covid_lockdown'</span>] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> start, end <span class="kw">in</span> covid_lockdown_ranges:</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>    bike.loc[(bike[<span class="st">'dteday'</span>] <span class="op">&gt;=</span> pd.to_datetime(start)) <span class="op">&amp;</span> (bike[<span class="st">'dteday'</span>] <span class="op">&lt;=</span> pd.to_datetime(end)), <span class="st">'covid_lockdown'</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a><span class="co"># 2) gov_shutdown</span></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>gov_shutdown_ranges <span class="op">=</span> [(<span class="st">'2013-10-01'</span>,<span class="st">'2013-10-17'</span>), (<span class="st">'2018-01-20'</span>,<span class="st">'2018-01-22'</span>), (<span class="st">'2018-12-22'</span>,<span class="st">'2019-01-25'</span>)]</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>bike[<span class="st">'gov_shutdown'</span>] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> start, end <span class="kw">in</span> gov_shutdown_ranges:</span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>    bike.loc[(bike[<span class="st">'dteday'</span>] <span class="op">&gt;=</span> pd.to_datetime(start)) <span class="op">&amp;</span> (bike[<span class="st">'dteday'</span>] <span class="op">&lt;=</span> pd.to_datetime(end)), <span class="st">'gov_shutdown'</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a><span class="co"># 3) big_event</span></span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>big_event_ranges <span class="op">=</span> [</span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Presidential Inaugurations</span></span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2013-01-18'</span>, <span class="st">'2013-01-22'</span>), (<span class="st">'2017-01-19'</span>, <span class="st">'2017-01-21'</span>), (<span class="st">'2021-01-19'</span>, <span class="st">'2021-01-21'</span>),</span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a>    <span class="co"># State of the Union / Joint Session Addresses</span></span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2011-01-25'</span>, <span class="st">'2011-01-25'</span>), (<span class="st">'2012-01-24'</span>, <span class="st">'2012-01-24'</span>), (<span class="st">'2013-02-12'</span>, <span class="st">'2013-02-12'</span>),</span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2014-01-28'</span>, <span class="st">'2014-01-28'</span>), (<span class="st">'2015-01-20'</span>, <span class="st">'2015-01-20'</span>), (<span class="st">'2016-01-12'</span>, <span class="st">'2016-01-12'</span>),</span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2017-02-28'</span>, <span class="st">'2017-02-28'</span>), (<span class="st">'2018-01-30'</span>, <span class="st">'2018-01-30'</span>), (<span class="st">'2019-02-05'</span>, <span class="st">'2019-02-05'</span>),</span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2020-02-04'</span>, <span class="st">'2020-02-04'</span>), (<span class="st">'2021-04-28'</span>, <span class="st">'2021-04-28'</span>), (<span class="st">'2022-03-01'</span>, <span class="st">'2022-03-01'</span>),</span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2023-02-07'</span>, <span class="st">'2023-02-07'</span>),</span>
<span id="cb18-32"><a href="#cb18-32" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Major Marches &amp; Protests</span></span>
<span id="cb18-33"><a href="#cb18-33" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2017-01-21'</span>, <span class="st">'2017-01-21'</span>), (<span class="st">'2018-01-20'</span>, <span class="st">'2018-01-20'</span>), (<span class="st">'2019-01-19'</span>, <span class="st">'2019-01-19'</span>), (<span class="st">'2020-01-18'</span>, <span class="st">'2020-01-18'</span>),</span>
<span id="cb18-34"><a href="#cb18-34" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2018-03-24'</span>, <span class="st">'2018-03-24'</span>), (<span class="st">'2017-04-22'</span>, <span class="st">'2017-04-22'</span>),</span>
<span id="cb18-35"><a href="#cb18-35" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2011-01-22'</span>, <span class="st">'2011-01-22'</span>), (<span class="st">'2012-01-23'</span>, <span class="st">'2012-01-23'</span>), (<span class="st">'2013-01-25'</span>, <span class="st">'2013-01-25'</span>),</span>
<span id="cb18-36"><a href="#cb18-36" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2014-01-22'</span>, <span class="st">'2014-01-22'</span>), (<span class="st">'2015-01-22'</span>, <span class="st">'2015-01-22'</span>), (<span class="st">'2016-01-22'</span>, <span class="st">'2016-01-22'</span>),</span>
<span id="cb18-37"><a href="#cb18-37" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2017-01-27'</span>, <span class="st">'2017-01-27'</span>), (<span class="st">'2018-01-19'</span>, <span class="st">'2018-01-19'</span>), (<span class="st">'2019-01-18'</span>, <span class="st">'2019-01-18'</span>),</span>
<span id="cb18-38"><a href="#cb18-38" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2020-01-24'</span>, <span class="st">'2020-01-24'</span>), (<span class="st">'2022-01-21'</span>, <span class="st">'2022-01-21'</span>), (<span class="st">'2023-01-20'</span>, <span class="st">'2023-01-20'</span>),</span>
<span id="cb18-39"><a href="#cb18-39" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2020-05-29'</span>, <span class="st">'2020-06-07'</span>), (<span class="st">'2021-01-06'</span>, <span class="st">'2021-01-06'</span>),</span>
<span id="cb18-40"><a href="#cb18-40" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Other Major DC Events</span></span>
<span id="cb18-41"><a href="#cb18-41" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2015-09-22'</span>, <span class="st">'2015-09-24'</span>), (<span class="st">'2014-11-11'</span>, <span class="st">'2014-11-11'</span>),</span>
<span id="cb18-42"><a href="#cb18-42" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2017-04-29'</span>, <span class="st">'2017-04-29'</span>), (<span class="st">'2018-08-12'</span>, <span class="st">'2018-08-12'</span>),</span>
<span id="cb18-43"><a href="#cb18-43" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb18-44"><a href="#cb18-44" aria-hidden="true" tabindex="-1"></a>bike[<span class="st">'big_event'</span>] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb18-45"><a href="#cb18-45" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> start, end <span class="kw">in</span> big_event_ranges:</span>
<span id="cb18-46"><a href="#cb18-46" aria-hidden="true" tabindex="-1"></a>    bike.loc[(bike[<span class="st">'dteday'</span>] <span class="op">&gt;=</span> pd.to_datetime(start)) <span class="op">&amp;</span> (bike[<span class="st">'dteday'</span>] <span class="op">&lt;=</span> pd.to_datetime(end)), <span class="st">'big_event'</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb18-47"><a href="#cb18-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-48"><a href="#cb18-48" aria-hidden="true" tabindex="-1"></a><span class="co"># 4) major_holiday</span></span>
<span id="cb18-49"><a href="#cb18-49" aria-hidden="true" tabindex="-1"></a>cal <span class="op">=</span> USFederalHolidayCalendar()</span>
<span id="cb18-50"><a href="#cb18-50" aria-hidden="true" tabindex="-1"></a>federal_holidays <span class="op">=</span> cal.holidays(start<span class="op">=</span>min_day, end<span class="op">=</span>max_day)</span>
<span id="cb18-51"><a href="#cb18-51" aria-hidden="true" tabindex="-1"></a>fixed_major_md <span class="op">=</span> {(<span class="dv">1</span>,<span class="dv">1</span>),(<span class="dv">7</span>,<span class="dv">4</span>),(<span class="dv">12</span>,<span class="dv">25</span>)}</span>
<span id="cb18-52"><a href="#cb18-52" aria-hidden="true" tabindex="-1"></a>fixed_major <span class="op">=</span> bike[<span class="st">'dteday'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> d: (d.month, d.day) <span class="kw">in</span> fixed_major_md)</span>
<span id="cb18-53"><a href="#cb18-53" aria-hidden="true" tabindex="-1"></a>bike[<span class="st">'major_holiday'</span>] <span class="op">=</span> (((bike[<span class="st">'holiday'</span>] <span class="op">==</span> <span class="dv">1</span>) <span class="op">&amp;</span> (bike[<span class="st">'dteday'</span>].isin(federal_holidays) <span class="op">|</span> fixed_major)) <span class="op">|</span> fixed_major).astype(<span class="bu">int</span>)</span>
<span id="cb18-54"><a href="#cb18-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-55"><a href="#cb18-55" aria-hidden="true" tabindex="-1"></a><span class="co"># 5) date and day_of_week</span></span>
<span id="cb18-56"><a href="#cb18-56" aria-hidden="true" tabindex="-1"></a>bike[<span class="st">'date'</span>] <span class="op">=</span> bike[<span class="st">'dteday'</span>].dt.date</span>
<span id="cb18-57"><a href="#cb18-57" aria-hidden="true" tabindex="-1"></a>bike[<span class="st">'day_of_week'</span>] <span class="op">=</span> bike[<span class="st">'dteday'</span>].dt.day_name()</span>
<span id="cb18-58"><a href="#cb18-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-59"><a href="#cb18-59" aria-hidden="true" tabindex="-1"></a><span class="co"># 6) weather_emergency (NEW)</span></span>
<span id="cb18-60"><a href="#cb18-60" aria-hidden="true" tabindex="-1"></a><span class="co"># Blizzards, hurricanes, derechos, and other major weather events in DC (2011-2023)</span></span>
<span id="cb18-61"><a href="#cb18-61" aria-hidden="true" tabindex="-1"></a>weather_emergency_ranges <span class="op">=</span> [</span>
<span id="cb18-62"><a href="#cb18-62" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- Major Blizzards / Snowstorms ---</span></span>
<span id="cb18-63"><a href="#cb18-63" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Jan 2011 snowstorm (~5" at DCA, widespread disruption)</span></span>
<span id="cb18-64"><a href="#cb18-64" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2011-01-26'</span>, <span class="st">'2011-01-27'</span>),</span>
<span id="cb18-65"><a href="#cb18-65" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Feb 2014 snowstorm (~6" + ice, 2nd major storm of brutal winter)</span></span>
<span id="cb18-66"><a href="#cb18-66" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2014-02-12'</span>, <span class="st">'2014-02-13'</span>),</span>
<span id="cb18-67"><a href="#cb18-67" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Mar 2014 snowstorm (continuation of brutal 2013-14 winter)</span></span>
<span id="cb18-68"><a href="#cb18-68" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2014-03-17'</span>, <span class="st">'2014-03-17'</span>),</span>
<span id="cb18-69"><a href="#cb18-69" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Jan 2016 Blizzard Jonas / Snowzilla (17.8" at DCA - historic, state of emergency)</span></span>
<span id="cb18-70"><a href="#cb18-70" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2016-01-22'</span>, <span class="st">'2016-01-24'</span>),</span>
<span id="cb18-71"><a href="#cb18-71" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Jan 2019 major snowstorm (8.3" at DCA)</span></span>
<span id="cb18-72"><a href="#cb18-72" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2019-01-13'</span>, <span class="st">'2019-01-14'</span>),</span>
<span id="cb18-73"><a href="#cb18-73" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Feb 2019 snowstorm</span></span>
<span id="cb18-74"><a href="#cb18-74" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2019-02-11'</span>, <span class="st">'2019-02-12'</span>),</span>
<span id="cb18-75"><a href="#cb18-75" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Jan 2022 snowstorm (6.9" at DCA)</span></span>
<span id="cb18-76"><a href="#cb18-76" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2022-01-03'</span>, <span class="st">'2022-01-04'</span>),</span>
<span id="cb18-77"><a href="#cb18-77" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Jan 2016 also had a second smaller storm</span></span>
<span id="cb18-78"><a href="#cb18-78" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2016-02-15'</span>, <span class="st">'2016-02-16'</span>),</span>
<span id="cb18-79"><a href="#cb18-79" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Dec 2020 snowstorm</span></span>
<span id="cb18-80"><a href="#cb18-80" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2020-12-16'</span>, <span class="st">'2020-12-17'</span>),</span>
<span id="cb18-81"><a href="#cb18-81" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Feb 2015 back-to-back snowstorms (Juno aftermath + multiple storms)</span></span>
<span id="cb18-82"><a href="#cb18-82" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2015-02-16'</span>, <span class="st">'2015-02-17'</span>),</span>
<span id="cb18-83"><a href="#cb18-83" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2015-03-05'</span>, <span class="st">'2015-03-06'</span>),</span>
<span id="cb18-84"><a href="#cb18-84" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Feb 2013 Nemo (DC fringe, significant snow)</span></span>
<span id="cb18-85"><a href="#cb18-85" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2013-02-08'</span>, <span class="st">'2013-02-09'</span>),</span>
<span id="cb18-86"><a href="#cb18-86" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- Hurricanes &amp; Tropical Storms ---</span></span>
<span id="cb18-87"><a href="#cb18-87" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Hurricane Irene - heavy rain, flooding, wind damage in DC</span></span>
<span id="cb18-88"><a href="#cb18-88" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2011-08-27'</span>, <span class="st">'2011-08-28'</span>),</span>
<span id="cb18-89"><a href="#cb18-89" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Hurricane Sandy - historic storm, extensive DC-area damage, state of emergency</span></span>
<span id="cb18-90"><a href="#cb18-90" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2012-10-28'</span>, <span class="st">'2012-10-30'</span>),</span>
<span id="cb18-91"><a href="#cb18-91" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Tropical Storm Isaias - power outages, downed trees across DC metro</span></span>
<span id="cb18-92"><a href="#cb18-92" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2020-08-04'</span>, <span class="st">'2020-08-04'</span>),</span>
<span id="cb18-93"><a href="#cb18-93" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- Derecho &amp; Extreme Wind Events ---</span></span>
<span id="cb18-94"><a href="#cb18-94" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Derecho of June 29, 2012 - 70+ mph gusts, 1M+ without power, 22 deaths</span></span>
<span id="cb18-95"><a href="#cb18-95" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2012-06-29'</span>, <span class="st">'2012-06-29'</span>),</span>
<span id="cb18-96"><a href="#cb18-96" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- Earthquake ---</span></span>
<span id="cb18-97"><a href="#cb18-97" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 5.8 magnitude Virginia earthquake felt strongly throughout DC</span></span>
<span id="cb18-98"><a href="#cb18-98" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'2011-08-23'</span>, <span class="st">'2011-08-23'</span>),</span>
<span id="cb18-99"><a href="#cb18-99" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb18-100"><a href="#cb18-100" aria-hidden="true" tabindex="-1"></a>bike[<span class="st">'weather_emergency'</span>] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb18-101"><a href="#cb18-101" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> start, end <span class="kw">in</span> weather_emergency_ranges:</span>
<span id="cb18-102"><a href="#cb18-102" aria-hidden="true" tabindex="-1"></a>    bike.loc[(bike[<span class="st">'dteday'</span>] <span class="op">&gt;=</span> pd.to_datetime(start)) <span class="op">&amp;</span> (bike[<span class="st">'dteday'</span>] <span class="op">&lt;=</span> pd.to_datetime(end)), <span class="st">'weather_emergency'</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb18-103"><a href="#cb18-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-104"><a href="#cb18-104" aria-hidden="true" tabindex="-1"></a><span class="co"># ── Sanity check</span></span>
<span id="cb18-105"><a href="#cb18-105" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'weather_emergency flagged dates:'</span>)</span>
<span id="cb18-106"><a href="#cb18-106" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(bike[bike[<span class="st">'weather_emergency'</span>] <span class="op">==</span> <span class="dv">1</span>][[<span class="st">'dteday'</span>]].drop_duplicates().sort_values(<span class="st">'dteday'</span>).to_string())</span>
<span id="cb18-107"><a href="#cb18-107" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'</span><span class="ch">\n</span><span class="ss">Total weather_emergency rows: </span><span class="sc">{</span>bike[<span class="st">"weather_emergency"</span>]<span class="sc">.</span><span class="bu">sum</span>()<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb18-108"><a href="#cb18-108" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Total columns: </span><span class="sc">{</span>bike<span class="sc">.</span>shape[<span class="dv">1</span>]<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb18-109"><a href="#cb18-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-110"><a href="#cb18-110" aria-hidden="true" tabindex="-1"></a><span class="co"># ── Export</span></span>
<span id="cb18-111"><a href="#cb18-111" aria-hidden="true" tabindex="-1"></a>bike.to_csv(<span class="st">'bikes_with_features.csv'</span>, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb18-112"><a href="#cb18-112" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'</span><span class="ch">\n</span><span class="st">Columns included:'</span>, <span class="bu">list</span>(bike.columns))</span>
<span id="cb18-113"><a href="#cb18-113" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Shape: </span><span class="sc">{</span>bike<span class="sc">.</span>shape<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb18-114"><a href="#cb18-114" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'CSV saved as bikes_with_features.csv'</span>)</span>
<span id="cb18-115"><a href="#cb18-115" aria-hidden="true" tabindex="-1"></a>files.download(<span class="st">'bikes_with_features.csv'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>weather_emergency flagged dates:
          dteday
600   2011-01-26
624   2011-01-27
5615  2011-08-23
5711  2011-08-27
5735  2011-08-28
13078 2012-06-29
15982 2012-10-28
16006 2012-10-29
16030 2012-10-30
18454 2013-02-08
18478 2013-02-09
27309 2014-02-12
27333 2014-02-13
28100 2014-03-17
36164 2015-02-16
36188 2015-02-17
36572 2015-03-05
36596 2015-03-06
44323 2016-01-22
44347 2016-01-23
44371 2016-01-24
44899 2016-02-15
44923 2016-02-16
70408 2019-01-13
70432 2019-01-14
71104 2019-02-11
71128 2019-02-12
84062 2020-08-04
87278 2020-12-16
87302 2020-12-17
96469 2022-01-03
96493 2022-01-04

Total weather_emergency rows: 768
Total columns: 19

Columns included: ['dteday', 'hr', 'casual', 'registered', 'temp_c', 'feels_like_c', 'hum', 'windspeed', 'weathersit', 'season', 'holiday', 'workingday', 'date', 'day_of_week', 'covid_lockdown', 'gov_shutdown', 'big_event', 'major_holiday', 'weather_emergency']
Shape: (112475, 19)
CSV saved as bikes_with_features.csv</code></pre>
</div>
<div class="cell-output cell-output-display">
<script type="application/javascript">

    async function download(id, filename, size) {
      if (!google.colab.kernel.accessAllowed) {
        return;
      }
      const div = document.createElement('div');
      const label = document.createElement('label');
      label.textContent = `Downloading "${filename}": `;
      div.appendChild(label);
      const progress = document.createElement('progress');
      progress.max = size;
      div.appendChild(progress);
      document.body.appendChild(div);

      const buffers = [];
      let downloaded = 0;

      const channel = await google.colab.kernel.comms.open(id);
      // Send a message to notify the kernel that we're ready.
      channel.send({})

      for await (const message of channel.messages) {
        // Send a message to notify the kernel that we're ready.
        channel.send({})
        if (message.buffers) {
          for (const buffer of message.buffers) {
            buffers.push(buffer);
            downloaded += buffer.byteLength;
            progress.value = downloaded;
          }
        }
      }
      const blob = new Blob(buffers, {type: 'application/binary'});
      const a = document.createElement('a');
      a.href = window.URL.createObjectURL(blob);
      a.download = filename;
      div.appendChild(a);
      a.click();
      div.remove();
    }
  
</script>
</div>
<div class="cell-output cell-output-display">
<script type="application/javascript">
download("download_cac5cd23-0b06-47cb-91ac-dae09b40be8e", "bikes_with_features.csv", 9323718)
</script>
</div>
</div>
<div id="cell-35" class="cell" data-outputid="382dd52c-c417-4d8d-9834-fe84b7cd1258" data-quarto-private-1="{&quot;key&quot;:&quot;colab&quot;,&quot;value&quot;:{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:1000}}" data-execution_count="60">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> tensorflow <span class="im">as</span> tf</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> tensorflow <span class="im">import</span> keras</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> MinMaxScaler</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> tensorflow.keras.models <span class="im">import</span> Sequential</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> tensorflow.keras.layers <span class="im">import</span> Dense, Dropout</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="co"># ── 1. Prepare features &amp; target ──────────────────────────────────────────</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Target: total hourly ridership</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>bike[<span class="st">'total_riders'</span>] <span class="op">=</span> bike[<span class="st">'casual'</span>] <span class="op">+</span> bike[<span class="st">'registered'</span>]</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Encode day_of_week as integer (Monday=0 ... Sunday=6)</span></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>day_map <span class="op">=</span> {<span class="st">'Monday'</span>:<span class="dv">0</span>,<span class="st">'Tuesday'</span>:<span class="dv">1</span>,<span class="st">'Wednesday'</span>:<span class="dv">2</span>,<span class="st">'Thursday'</span>:<span class="dv">3</span>,</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>           <span class="st">'Friday'</span>:<span class="dv">4</span>,<span class="st">'Saturday'</span>:<span class="dv">5</span>,<span class="st">'Sunday'</span>:<span class="dv">6</span>}</span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>bike[<span class="st">'day_of_week_num'</span>] <span class="op">=</span> bike[<span class="st">'day_of_week'</span>].<span class="bu">map</span>(day_map)</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Feature columns</span></span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>feature_cols <span class="op">=</span> [</span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>    <span class="st">'hr'</span>,            <span class="co"># hour of day</span></span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>    <span class="st">'temp_c'</span>,        <span class="co"># temperature</span></span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>    <span class="st">'feels_like_c'</span>,  <span class="co"># feels-like temperature</span></span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>    <span class="st">'hum'</span>,           <span class="co"># humidity</span></span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a>    <span class="st">'windspeed'</span>,     <span class="co"># wind speed</span></span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a>    <span class="st">'weathersit'</span>,    <span class="co"># weather situation code</span></span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a>    <span class="st">'season'</span>,        <span class="co"># season (1-4)</span></span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a>    <span class="st">'holiday'</span>,       <span class="co"># public holiday flag</span></span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a>    <span class="st">'workingday'</span>,    <span class="co"># working day flag</span></span>
<span id="cb20-32"><a href="#cb20-32" aria-hidden="true" tabindex="-1"></a>    <span class="st">'day_of_week_num'</span>,  <span class="co"># day of week (0-6)</span></span>
<span id="cb20-33"><a href="#cb20-33" aria-hidden="true" tabindex="-1"></a>    <span class="st">'covid_lockdown'</span>,   <span class="co"># COVID lockdown period</span></span>
<span id="cb20-34"><a href="#cb20-34" aria-hidden="true" tabindex="-1"></a>    <span class="st">'gov_shutdown'</span>,     <span class="co"># government shutdown period</span></span>
<span id="cb20-35"><a href="#cb20-35" aria-hidden="true" tabindex="-1"></a>    <span class="st">'big_event'</span>,        <span class="co"># major DC events</span></span>
<span id="cb20-36"><a href="#cb20-36" aria-hidden="true" tabindex="-1"></a>    <span class="st">'major_holiday'</span>,    <span class="co"># major holiday</span></span>
<span id="cb20-37"><a href="#cb20-37" aria-hidden="true" tabindex="-1"></a>    <span class="st">'weather_emergency'</span> <span class="co"># blizzards, hurricanes, etc.</span></span>
<span id="cb20-38"><a href="#cb20-38" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb20-39"><a href="#cb20-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-40"><a href="#cb20-40" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> bike[feature_cols].values</span>
<span id="cb20-41"><a href="#cb20-41" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> bike[<span class="st">'total_riders'</span>].values</span>
<span id="cb20-42"><a href="#cb20-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-43"><a href="#cb20-43" aria-hidden="true" tabindex="-1"></a><span class="co"># ── 2. Scale features ─────────────────────────────────────────────────────</span></span>
<span id="cb20-44"><a href="#cb20-44" aria-hidden="true" tabindex="-1"></a>scaler <span class="op">=</span> MinMaxScaler()</span>
<span id="cb20-45"><a href="#cb20-45" aria-hidden="true" tabindex="-1"></a>X_scaled <span class="op">=</span> scaler.fit_transform(X)</span>
<span id="cb20-46"><a href="#cb20-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-47"><a href="#cb20-47" aria-hidden="true" tabindex="-1"></a><span class="co"># ── 3. Train / Validation / Test split (70 / 15 / 15) ────────────────────</span></span>
<span id="cb20-48"><a href="#cb20-48" aria-hidden="true" tabindex="-1"></a>X_train, X_temp, y_train, y_temp <span class="op">=</span> train_test_split(</span>
<span id="cb20-49"><a href="#cb20-49" aria-hidden="true" tabindex="-1"></a>    X_scaled, y, test_size<span class="op">=</span><span class="fl">0.30</span>, random_state<span class="op">=</span><span class="dv">42</span></span>
<span id="cb20-50"><a href="#cb20-50" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-51"><a href="#cb20-51" aria-hidden="true" tabindex="-1"></a>X_val, X_test, y_val, y_test <span class="op">=</span> train_test_split(</span>
<span id="cb20-52"><a href="#cb20-52" aria-hidden="true" tabindex="-1"></a>    X_temp, y_temp, test_size<span class="op">=</span><span class="fl">0.50</span>, random_state<span class="op">=</span><span class="dv">42</span></span>
<span id="cb20-53"><a href="#cb20-53" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-54"><a href="#cb20-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-55"><a href="#cb20-55" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Train:      </span><span class="sc">{</span>X_train<span class="sc">.</span>shape[<span class="dv">0</span>]<span class="sc">:,}</span><span class="ss"> rows'</span>)</span>
<span id="cb20-56"><a href="#cb20-56" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Validation: </span><span class="sc">{</span>X_val<span class="sc">.</span>shape[<span class="dv">0</span>]<span class="sc">:,}</span><span class="ss"> rows'</span>)</span>
<span id="cb20-57"><a href="#cb20-57" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Test:       </span><span class="sc">{</span>X_test<span class="sc">.</span>shape[<span class="dv">0</span>]<span class="sc">:,}</span><span class="ss"> rows'</span>)</span>
<span id="cb20-58"><a href="#cb20-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-59"><a href="#cb20-59" aria-hidden="true" tabindex="-1"></a><span class="co"># ── 4. Build the Neural Network ───────────────────────────────────────────</span></span>
<span id="cb20-60"><a href="#cb20-60" aria-hidden="true" tabindex="-1"></a>tf.random.set_seed(<span class="dv">111</span>)</span>
<span id="cb20-61"><a href="#cb20-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-62"><a href="#cb20-62" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> Sequential()</span>
<span id="cb20-63"><a href="#cb20-63" aria-hidden="true" tabindex="-1"></a>model.add(Dense(<span class="dv">128</span>, input_dim<span class="op">=</span><span class="bu">len</span>(X_train[<span class="dv">0</span>]), activation<span class="op">=</span><span class="st">'relu'</span>))</span>
<span id="cb20-64"><a href="#cb20-64" aria-hidden="true" tabindex="-1"></a>model.add(Dropout(<span class="fl">.5</span>))</span>
<span id="cb20-65"><a href="#cb20-65" aria-hidden="true" tabindex="-1"></a>model.add(Dense(<span class="dv">256</span>, activation<span class="op">=</span><span class="st">'relu'</span>))</span>
<span id="cb20-66"><a href="#cb20-66" aria-hidden="true" tabindex="-1"></a>model.add(Dense(<span class="dv">64</span>, activation<span class="op">=</span><span class="st">'leaky_relu'</span>))</span>
<span id="cb20-67"><a href="#cb20-67" aria-hidden="true" tabindex="-1"></a>model.add(Dense(<span class="dv">1</span>, activation<span class="op">=</span><span class="st">'relu'</span>))</span>
<span id="cb20-68"><a href="#cb20-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-69"><a href="#cb20-69" aria-hidden="true" tabindex="-1"></a>model.<span class="bu">compile</span>(</span>
<span id="cb20-70"><a href="#cb20-70" aria-hidden="true" tabindex="-1"></a>    optimizer<span class="op">=</span><span class="st">'adam'</span>,</span>
<span id="cb20-71"><a href="#cb20-71" aria-hidden="true" tabindex="-1"></a>    loss<span class="op">=</span><span class="st">'mse'</span>,</span>
<span id="cb20-72"><a href="#cb20-72" aria-hidden="true" tabindex="-1"></a>    metrics<span class="op">=</span>[<span class="st">'mae'</span>]</span>
<span id="cb20-73"><a href="#cb20-73" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-74"><a href="#cb20-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-75"><a href="#cb20-75" aria-hidden="true" tabindex="-1"></a>model.summary()</span>
<span id="cb20-76"><a href="#cb20-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-77"><a href="#cb20-77" aria-hidden="true" tabindex="-1"></a><span class="co"># ── 5. Train ──────────────────────────────────────────────────────────────</span></span>
<span id="cb20-78"><a href="#cb20-78" aria-hidden="true" tabindex="-1"></a>early_stop <span class="op">=</span> tf.keras.callbacks.EarlyStopping(</span>
<span id="cb20-79"><a href="#cb20-79" aria-hidden="true" tabindex="-1"></a>    monitor<span class="op">=</span><span class="st">'val_loss'</span>, patience<span class="op">=</span><span class="dv">10</span>, restore_best_weights<span class="op">=</span><span class="va">True</span></span>
<span id="cb20-80"><a href="#cb20-80" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-81"><a href="#cb20-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-82"><a href="#cb20-82" aria-hidden="true" tabindex="-1"></a>history <span class="op">=</span> model.fit(</span>
<span id="cb20-83"><a href="#cb20-83" aria-hidden="true" tabindex="-1"></a>    X_train, y_train,</span>
<span id="cb20-84"><a href="#cb20-84" aria-hidden="true" tabindex="-1"></a>    validation_data<span class="op">=</span>(X_val, y_val),</span>
<span id="cb20-85"><a href="#cb20-85" aria-hidden="true" tabindex="-1"></a>    epochs<span class="op">=</span><span class="dv">200</span>,</span>
<span id="cb20-86"><a href="#cb20-86" aria-hidden="true" tabindex="-1"></a>    batch_size<span class="op">=</span><span class="dv">256</span>,</span>
<span id="cb20-87"><a href="#cb20-87" aria-hidden="true" tabindex="-1"></a>    callbacks<span class="op">=</span>[early_stop],</span>
<span id="cb20-88"><a href="#cb20-88" aria-hidden="true" tabindex="-1"></a>    verbose<span class="op">=</span><span class="dv">1</span></span>
<span id="cb20-89"><a href="#cb20-89" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-90"><a href="#cb20-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-91"><a href="#cb20-91" aria-hidden="true" tabindex="-1"></a><span class="co"># ── 6. Evaluate on test set ───────────────────────────────────────────────</span></span>
<span id="cb20-92"><a href="#cb20-92" aria-hidden="true" tabindex="-1"></a>test_loss, test_mae <span class="op">=</span> model.evaluate(X_test, y_test, verbose<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb20-93"><a href="#cb20-93" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'</span><span class="ch">\n</span><span class="ss">Test MSE: </span><span class="sc">{</span>test_loss<span class="sc">:.2f}</span><span class="ss">'</span>)</span>
<span id="cb20-94"><a href="#cb20-94" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Test MAE: </span><span class="sc">{</span>test_mae<span class="sc">:.2f}</span><span class="ss"> riders'</span>)</span>
<span id="cb20-95"><a href="#cb20-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-96"><a href="#cb20-96" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> model.predict(X_test).flatten()</span>
<span id="cb20-97"><a href="#cb20-97" aria-hidden="true" tabindex="-1"></a>ss_res <span class="op">=</span> np.<span class="bu">sum</span>((y_test <span class="op">-</span> y_pred) <span class="op">**</span> <span class="dv">2</span>)</span>
<span id="cb20-98"><a href="#cb20-98" aria-hidden="true" tabindex="-1"></a>ss_tot <span class="op">=</span> np.<span class="bu">sum</span>((y_test <span class="op">-</span> np.mean(y_test)) <span class="op">**</span> <span class="dv">2</span>)</span>
<span id="cb20-99"><a href="#cb20-99" aria-hidden="true" tabindex="-1"></a>r2 <span class="op">=</span> <span class="dv">1</span> <span class="op">-</span> ss_res <span class="op">/</span> ss_tot</span>
<span id="cb20-100"><a href="#cb20-100" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Test R²:  </span><span class="sc">{</span>r2<span class="sc">:.4f}</span><span class="ss">'</span>)</span>
<span id="cb20-101"><a href="#cb20-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-102"><a href="#cb20-102" aria-hidden="true" tabindex="-1"></a><span class="co"># ── 7. Plot training curves ───────────────────────────────────────────────</span></span>
<span id="cb20-103"><a href="#cb20-103" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">4</span>))</span>
<span id="cb20-104"><a href="#cb20-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-105"><a href="#cb20-105" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].plot(history.history[<span class="st">'loss'</span>], label<span class="op">=</span><span class="st">'Train Loss'</span>)</span>
<span id="cb20-106"><a href="#cb20-106" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].plot(history.history[<span class="st">'val_loss'</span>], label<span class="op">=</span><span class="st">'Val Loss'</span>)</span>
<span id="cb20-107"><a href="#cb20-107" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">'Loss (MSE) Over Epochs'</span>)</span>
<span id="cb20-108"><a href="#cb20-108" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_xlabel(<span class="st">'Epoch'</span>)</span>
<span id="cb20-109"><a href="#cb20-109" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_ylabel(<span class="st">'MSE'</span>)</span>
<span id="cb20-110"><a href="#cb20-110" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].legend()</span>
<span id="cb20-111"><a href="#cb20-111" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].grid(<span class="va">True</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, alpha<span class="op">=</span><span class="fl">0.6</span>)</span>
<span id="cb20-112"><a href="#cb20-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-113"><a href="#cb20-113" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].plot(history.history[<span class="st">'mae'</span>], label<span class="op">=</span><span class="st">'Train MAE'</span>)</span>
<span id="cb20-114"><a href="#cb20-114" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].plot(history.history[<span class="st">'val_mae'</span>], label<span class="op">=</span><span class="st">'Val MAE'</span>)</span>
<span id="cb20-115"><a href="#cb20-115" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">'MAE Over Epochs'</span>)</span>
<span id="cb20-116"><a href="#cb20-116" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_xlabel(<span class="st">'Epoch'</span>)</span>
<span id="cb20-117"><a href="#cb20-117" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_ylabel(<span class="st">'MAE (riders)'</span>)</span>
<span id="cb20-118"><a href="#cb20-118" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].legend()</span>
<span id="cb20-119"><a href="#cb20-119" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].grid(<span class="va">True</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, alpha<span class="op">=</span><span class="fl">0.6</span>)</span>
<span id="cb20-120"><a href="#cb20-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-121"><a href="#cb20-121" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb20-122"><a href="#cb20-122" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb20-123"><a href="#cb20-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-124"><a href="#cb20-124" aria-hidden="true" tabindex="-1"></a><span class="co"># ── 8. Predicted vs Actual scatter (sample 2000 pts for clarity) ──────────</span></span>
<span id="cb20-125"><a href="#cb20-125" aria-hidden="true" tabindex="-1"></a>sample_idx <span class="op">=</span> np.random.choice(<span class="bu">len</span>(y_test), size<span class="op">=</span><span class="dv">2000</span>, replace<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb20-126"><a href="#cb20-126" aria-hidden="true" tabindex="-1"></a>fig2, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">7</span>, <span class="dv">6</span>))</span>
<span id="cb20-127"><a href="#cb20-127" aria-hidden="true" tabindex="-1"></a>ax.scatter(y_test[sample_idx], y_pred[sample_idx], alpha<span class="op">=</span><span class="fl">0.3</span>, s<span class="op">=</span><span class="dv">10</span>, color<span class="op">=</span><span class="st">'steelblue'</span>)</span>
<span id="cb20-128"><a href="#cb20-128" aria-hidden="true" tabindex="-1"></a>max_val <span class="op">=</span> <span class="bu">max</span>(y_test.<span class="bu">max</span>(), y_pred.<span class="bu">max</span>())</span>
<span id="cb20-129"><a href="#cb20-129" aria-hidden="true" tabindex="-1"></a>ax.plot([<span class="dv">0</span>, max_val], [<span class="dv">0</span>, max_val], <span class="st">'r--'</span>, linewidth<span class="op">=</span><span class="fl">1.5</span>, label<span class="op">=</span><span class="st">'Perfect fit'</span>)</span>
<span id="cb20-130"><a href="#cb20-130" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">'Actual Riders'</span>)</span>
<span id="cb20-131"><a href="#cb20-131" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">'Predicted Riders'</span>)</span>
<span id="cb20-132"><a href="#cb20-132" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="ss">f'Predicted vs Actual  (R² = </span><span class="sc">{</span>r2<span class="sc">:.4f}</span><span class="ss">)'</span>)</span>
<span id="cb20-133"><a href="#cb20-133" aria-hidden="true" tabindex="-1"></a>ax.legend()</span>
<span id="cb20-134"><a href="#cb20-134" aria-hidden="true" tabindex="-1"></a>ax.grid(<span class="va">True</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, alpha<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb20-135"><a href="#cb20-135" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb20-136"><a href="#cb20-136" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb20-137"><a href="#cb20-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-138"><a href="#cb20-138" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'</span><span class="ch">\n</span><span class="st">Done.'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Train:      78,732 rows
Validation: 16,871 rows
Test:       16,872 rows</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>/usr/local/lib/python3.12/dist-packages/keras/src/layers/core/dense.py:93: UserWarning: Do not pass an `input_shape`/`input_dim` argument to a layer. When using Sequential models, prefer using an `Input(shape)` object as the first layer in the model instead.
  super().__init__(activity_regularizer=activity_regularizer, **kwargs)</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="font-weight: bold">Model: "sequential_3"</span>
</pre>
</div>
<div class="cell-output cell-output-display">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━┓
┃<span style="font-weight: bold"> Layer (type)                    </span>┃<span style="font-weight: bold"> Output Shape           </span>┃<span style="font-weight: bold">       Param # </span>┃
┡━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━┩
│ dense_12 (<span style="color: #0087ff; text-decoration-color: #0087ff">Dense</span>)                │ (<span style="color: #00d7ff; text-decoration-color: #00d7ff">None</span>, <span style="color: #00af00; text-decoration-color: #00af00">128</span>)            │         <span style="color: #00af00; text-decoration-color: #00af00">2,048</span> │
├─────────────────────────────────┼────────────────────────┼───────────────┤
│ dropout_5 (<span style="color: #0087ff; text-decoration-color: #0087ff">Dropout</span>)             │ (<span style="color: #00d7ff; text-decoration-color: #00d7ff">None</span>, <span style="color: #00af00; text-decoration-color: #00af00">128</span>)            │             <span style="color: #00af00; text-decoration-color: #00af00">0</span> │
├─────────────────────────────────┼────────────────────────┼───────────────┤
│ dense_13 (<span style="color: #0087ff; text-decoration-color: #0087ff">Dense</span>)                │ (<span style="color: #00d7ff; text-decoration-color: #00d7ff">None</span>, <span style="color: #00af00; text-decoration-color: #00af00">256</span>)            │        <span style="color: #00af00; text-decoration-color: #00af00">33,024</span> │
├─────────────────────────────────┼────────────────────────┼───────────────┤
│ dense_14 (<span style="color: #0087ff; text-decoration-color: #0087ff">Dense</span>)                │ (<span style="color: #00d7ff; text-decoration-color: #00d7ff">None</span>, <span style="color: #00af00; text-decoration-color: #00af00">64</span>)             │        <span style="color: #00af00; text-decoration-color: #00af00">16,448</span> │
├─────────────────────────────────┼────────────────────────┼───────────────┤
│ dense_15 (<span style="color: #0087ff; text-decoration-color: #0087ff">Dense</span>)                │ (<span style="color: #00d7ff; text-decoration-color: #00d7ff">None</span>, <span style="color: #00af00; text-decoration-color: #00af00">1</span>)              │            <span style="color: #00af00; text-decoration-color: #00af00">65</span> │
└─────────────────────────────────┴────────────────────────┴───────────────┘
</pre>
</div>
<div class="cell-output cell-output-display">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="font-weight: bold"> Total params: </span><span style="color: #00af00; text-decoration-color: #00af00">51,585</span> (201.50 KB)
</pre>
</div>
<div class="cell-output cell-output-display">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="font-weight: bold"> Trainable params: </span><span style="color: #00af00; text-decoration-color: #00af00">51,585</span> (201.50 KB)
</pre>
</div>
<div class="cell-output cell-output-display">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="font-weight: bold"> Non-trainable params: </span><span style="color: #00af00; text-decoration-color: #00af00">0</span> (0.00 B)
</pre>
</div>
<div class="cell-output cell-output-stdout">
<div class="ansi-escaped-output">
<pre>Epoch 1/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">5s</span> 10ms/step - loss: 152501.0000 - mae: 279.4078 - val_loss: 74134.0547 - val_mae: 200.1946

Epoch 2/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 76752.6797 - mae: 202.9598 - val_loss: 65868.1094 - val_mae: 183.6300

Epoch 3/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 68735.0859 - mae: 187.1489 - val_loss: 55513.5938 - val_mae: 161.4163

Epoch 4/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 60470.6328 - mae: 169.7561 - val_loss: 49300.6875 - val_mae: 146.9074

Epoch 5/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 54761.6719 - mae: 158.1217 - val_loss: 46864.2188 - val_mae: 139.5348

Epoch 6/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 51921.9805 - mae: 152.6435 - val_loss: 45619.4570 - val_mae: 136.9275

Epoch 7/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 49876.2031 - mae: 148.5215 - val_loss: 44276.8594 - val_mae: 135.8661

Epoch 8/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 48813.0430 - mae: 146.4271 - val_loss: 43409.6797 - val_mae: 133.8442

Epoch 9/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 47962.5430 - mae: 144.9780 - val_loss: 42720.8008 - val_mae: 131.9946

Epoch 10/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 47062.9492 - mae: 143.1583 - val_loss: 42040.6875 - val_mae: 131.2746

Epoch 11/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 4ms/step - loss: 46126.9414 - mae: 142.0711 - val_loss: 41193.9492 - val_mae: 130.1528

Epoch 12/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 4ms/step - loss: 45297.8164 - mae: 140.1482 - val_loss: 40697.0273 - val_mae: 128.5506

Epoch 13/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 44839.7578 - mae: 139.6460 - val_loss: 39594.1602 - val_mae: 127.0315

Epoch 14/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 43893.0781 - mae: 137.7982 - val_loss: 38993.4023 - val_mae: 126.2840

Epoch 15/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 43113.9570 - mae: 136.3700 - val_loss: 37659.6719 - val_mae: 124.9191

Epoch 16/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 42126.8867 - mae: 135.0425 - val_loss: 36426.1094 - val_mae: 123.1340

Epoch 17/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 41190.5234 - mae: 133.4366 - val_loss: 35378.1875 - val_mae: 120.9585

Epoch 18/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 40426.3477 - mae: 132.0047 - val_loss: 34400.6445 - val_mae: 119.4459

Epoch 19/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 38900.5469 - mae: 129.8069 - val_loss: 33594.4570 - val_mae: 117.9269

Epoch 20/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 38091.7266 - mae: 128.4335 - val_loss: 32272.2734 - val_mae: 116.7060

Epoch 21/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 37192.6367 - mae: 127.0074 - val_loss: 31694.8281 - val_mae: 114.5729

Epoch 22/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 36024.1836 - mae: 124.9552 - val_loss: 31001.0723 - val_mae: 113.8579

Epoch 23/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 35562.9492 - mae: 123.7791 - val_loss: 30556.0859 - val_mae: 112.0332

Epoch 24/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 4ms/step - loss: 34622.7930 - mae: 122.3952 - val_loss: 29733.5742 - val_mae: 111.8574

Epoch 25/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 4ms/step - loss: 33973.4492 - mae: 121.3241 - val_loss: 29041.8887 - val_mae: 110.1698

Epoch 26/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 33173.3008 - mae: 120.0674 - val_loss: 28617.0723 - val_mae: 109.1703

Epoch 27/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 32851.1602 - mae: 119.1616 - val_loss: 28347.8574 - val_mae: 108.6753

Epoch 28/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 32402.0352 - mae: 118.3535 - val_loss: 28135.3164 - val_mae: 108.3932

Epoch 29/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 32027.5664 - mae: 118.0120 - val_loss: 27585.8066 - val_mae: 107.3315

Epoch 30/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 31633.8184 - mae: 116.8752 - val_loss: 27211.4238 - val_mae: 106.6708

Epoch 31/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 31552.1172 - mae: 117.1889 - val_loss: 27351.0801 - val_mae: 106.5609

Epoch 32/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 31296.9395 - mae: 116.8520 - val_loss: 27023.6055 - val_mae: 106.8063

Epoch 33/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 31119.7441 - mae: 116.3007 - val_loss: 26480.6699 - val_mae: 104.8046

Epoch 34/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 30371.5273 - mae: 114.7110 - val_loss: 26131.1680 - val_mae: 104.1957

Epoch 35/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 30001.2480 - mae: 113.9055 - val_loss: 25863.2969 - val_mae: 103.4615

Epoch 36/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 4ms/step - loss: 30052.2012 - mae: 113.9486 - val_loss: 25587.4609 - val_mae: 102.4599

Epoch 37/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 4ms/step - loss: 29594.4043 - mae: 112.7697 - val_loss: 26128.6543 - val_mae: 103.1150

Epoch 38/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 4ms/step - loss: 29526.3945 - mae: 112.5382 - val_loss: 25630.0352 - val_mae: 102.9069

Epoch 39/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 29353.8750 - mae: 112.2332 - val_loss: 25748.7207 - val_mae: 102.8455

Epoch 40/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 29032.9180 - mae: 111.8667 - val_loss: 25268.9590 - val_mae: 101.8018

Epoch 41/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 28903.0449 - mae: 111.3795 - val_loss: 24787.0312 - val_mae: 100.8669

Epoch 42/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 28581.3848 - mae: 111.1541 - val_loss: 24492.7871 - val_mae: 100.1240

Epoch 43/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 28529.4629 - mae: 111.0053 - val_loss: 24853.5605 - val_mae: 101.1915

Epoch 44/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 28445.9746 - mae: 110.7087 - val_loss: 25024.2656 - val_mae: 100.9988

Epoch 45/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 27906.2344 - mae: 109.6537 - val_loss: 24660.1367 - val_mae: 100.6702

Epoch 46/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 28115.4980 - mae: 110.2361 - val_loss: 23887.3262 - val_mae: 98.8253

Epoch 47/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 27615.6660 - mae: 109.1585 - val_loss: 23930.5762 - val_mae: 98.9298

Epoch 48/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">2s</span> 4ms/step - loss: 27626.0312 - mae: 109.3007 - val_loss: 23718.6035 - val_mae: 98.4578

Epoch 49/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 4ms/step - loss: 27757.0273 - mae: 109.6322 - val_loss: 25175.4434 - val_mae: 101.7248

Epoch 50/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 27657.7891 - mae: 109.5590 - val_loss: 23271.6602 - val_mae: 97.6312

Epoch 51/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 27766.7383 - mae: 109.6592 - val_loss: 23557.3008 - val_mae: 98.4395

Epoch 52/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 27180.8672 - mae: 108.4292 - val_loss: 23757.2363 - val_mae: 98.2678

Epoch 53/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 26990.9414 - mae: 108.1149 - val_loss: 23045.5391 - val_mae: 97.5090

Epoch 54/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 27195.6992 - mae: 108.9309 - val_loss: 23271.6582 - val_mae: 97.6311

Epoch 55/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 4ms/step - loss: 26794.2656 - mae: 108.0009 - val_loss: 22969.2539 - val_mae: 96.8344

Epoch 56/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 4ms/step - loss: 26720.8535 - mae: 107.5512 - val_loss: 23264.3613 - val_mae: 97.9195

Epoch 57/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 27101.1270 - mae: 108.6479 - val_loss: 22809.9863 - val_mae: 97.0108

Epoch 58/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 26658.2109 - mae: 107.8101 - val_loss: 23095.3145 - val_mae: 97.5613

Epoch 59/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 26703.6973 - mae: 107.8433 - val_loss: 22885.4277 - val_mae: 96.7381

Epoch 60/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 4ms/step - loss: 26565.3418 - mae: 107.5362 - val_loss: 22557.8008 - val_mae: 96.5564

Epoch 61/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 4ms/step - loss: 26472.9043 - mae: 107.4292 - val_loss: 22885.5605 - val_mae: 97.1474

Epoch 62/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 26105.7754 - mae: 106.6863 - val_loss: 23000.4473 - val_mae: 97.7772

Epoch 63/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 26280.6777 - mae: 107.4029 - val_loss: 22639.9199 - val_mae: 96.6093

Epoch 64/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 26283.1504 - mae: 106.9620 - val_loss: 22970.6426 - val_mae: 97.3550

Epoch 65/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 26414.2891 - mae: 107.2428 - val_loss: 22562.5410 - val_mae: 95.9161

Epoch 66/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 26236.5078 - mae: 106.8431 - val_loss: 22565.6289 - val_mae: 96.3522

Epoch 67/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 26235.1191 - mae: 106.7647 - val_loss: 22878.8359 - val_mae: 96.8295

Epoch 68/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 26190.4219 - mae: 106.9940 - val_loss: 22628.1211 - val_mae: 96.4429

Epoch 69/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 25758.3574 - mae: 105.8355 - val_loss: 23017.6055 - val_mae: 96.9442

Epoch 70/200

<span class="ansi-bold">308/308</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 3ms/step - loss: 25868.6289 - mae: 106.3213 - val_loss: 22637.5410 - val_mae: 96.3798



Test MSE: 22550.83

Test MAE: 97.27 riders

<span class="ansi-bold">528/528</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">1s</span> 2ms/step

Test R²:  0.8117
</pre>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="starter_bikes_files/figure-html/cell-18-output-9.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="starter_bikes_files/figure-html/cell-18-output-10.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Done.</code></pre>
</div>
</div>
<div id="cell-36" class="cell" data-outputid="103ea11a-9d72-4372-bea5-81eb2d79e275" data-quarto-private-1="{&quot;key&quot;:&quot;colab&quot;,&quot;value&quot;:{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}}" data-execution_count="61">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pandas.tseries.holiday <span class="im">import</span> USFederalHolidayCalendar</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="co"># -----------------------------</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 1) Load holdout</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="co"># -----------------------------</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>HOLDOUT_URL <span class="op">=</span> <span class="st">"https://raw.githubusercontent.com/byui-cse/cse450-course/master/data/biking_holdout_test_mini.csv"</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>holdout <span class="op">=</span> pd.read_csv(HOLDOUT_URL)</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="co"># -----------------------------</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 2) Apply same transformations</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a><span class="co">#    (match what you did for bike)</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a><span class="co"># -----------------------------</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>holdout[<span class="st">"dteday"</span>] <span class="op">=</span> pd.to_datetime(holdout[<span class="st">"dteday"</span>])</span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>holdout[<span class="st">"day_of_week"</span>] <span class="op">=</span> holdout[<span class="st">"dteday"</span>].dt.day_name()</span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>day_map <span class="op">=</span> {</span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Monday"</span>: <span class="dv">0</span>, <span class="st">"Tuesday"</span>: <span class="dv">1</span>, <span class="st">"Wednesday"</span>: <span class="dv">2</span>, <span class="st">"Thursday"</span>: <span class="dv">3</span>,</span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Friday"</span>: <span class="dv">4</span>, <span class="st">"Saturday"</span>: <span class="dv">5</span>, <span class="st">"Sunday"</span>: <span class="dv">6</span></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>holdout[<span class="st">"day_of_week_num"</span>] <span class="op">=</span> holdout[<span class="st">"day_of_week"</span>].<span class="bu">map</span>(day_map)</span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Event flags (use the SAME windows you used above) ---</span></span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a><span class="co"># covid_lockdown</span></span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a>covid_lockdown_ranges <span class="op">=</span> [(<span class="st">"2020-04-01"</span>, <span class="st">"2020-05-29"</span>)]  <span class="co"># as in your earlier cell [page:1]</span></span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a>holdout[<span class="st">"covid_lockdown"</span>] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> start, end <span class="kw">in</span> covid_lockdown_ranges:</span>
<span id="cb24-29"><a href="#cb24-29" aria-hidden="true" tabindex="-1"></a>    start <span class="op">=</span> pd.to_datetime(start)<span class="op">;</span> end <span class="op">=</span> pd.to_datetime(end)</span>
<span id="cb24-30"><a href="#cb24-30" aria-hidden="true" tabindex="-1"></a>    holdout.loc[(holdout[<span class="st">"dteday"</span>] <span class="op">&gt;=</span> start) <span class="op">&amp;</span> (holdout[<span class="st">"dteday"</span>] <span class="op">&lt;=</span> end), <span class="st">"covid_lockdown"</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb24-31"><a href="#cb24-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-32"><a href="#cb24-32" aria-hidden="true" tabindex="-1"></a><span class="co"># gov_shutdown</span></span>
<span id="cb24-33"><a href="#cb24-33" aria-hidden="true" tabindex="-1"></a>gov_shutdown_ranges <span class="op">=</span> [(<span class="st">"2013-10-01"</span>,<span class="st">"2013-10-17"</span>), (<span class="st">"2018-01-20"</span>,<span class="st">"2018-01-22"</span>), (<span class="st">"2018-12-22"</span>,<span class="st">"2019-01-25"</span>)]</span>
<span id="cb24-34"><a href="#cb24-34" aria-hidden="true" tabindex="-1"></a>holdout[<span class="st">"gov_shutdown"</span>] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb24-35"><a href="#cb24-35" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> start, end <span class="kw">in</span> gov_shutdown_ranges:</span>
<span id="cb24-36"><a href="#cb24-36" aria-hidden="true" tabindex="-1"></a>    start <span class="op">=</span> pd.to_datetime(start)<span class="op">;</span> end <span class="op">=</span> pd.to_datetime(end)</span>
<span id="cb24-37"><a href="#cb24-37" aria-hidden="true" tabindex="-1"></a>    holdout.loc[(holdout[<span class="st">"dteday"</span>] <span class="op">&gt;=</span> start) <span class="op">&amp;</span> (holdout[<span class="st">"dteday"</span>] <span class="op">&lt;=</span> end), <span class="st">"gov_shutdown"</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb24-38"><a href="#cb24-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-39"><a href="#cb24-39" aria-hidden="true" tabindex="-1"></a><span class="co"># big_event</span></span>
<span id="cb24-40"><a href="#cb24-40" aria-hidden="true" tabindex="-1"></a>big_event_ranges <span class="op">=</span> [(<span class="st">"2013-01-18"</span>,<span class="st">"2013-01-22"</span>), (<span class="st">"2017-01-19"</span>,<span class="st">"2017-01-21"</span>), (<span class="st">"2021-01-19"</span>,<span class="st">"2021-01-21"</span>),</span>
<span id="cb24-41"><a href="#cb24-41" aria-hidden="true" tabindex="-1"></a>                    (<span class="st">"2015-09-22"</span>,<span class="st">"2015-09-24"</span>), (<span class="st">"2020-06-01"</span>,<span class="st">"2020-06-02"</span>)]</span>
<span id="cb24-42"><a href="#cb24-42" aria-hidden="true" tabindex="-1"></a>holdout[<span class="st">"big_event"</span>] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb24-43"><a href="#cb24-43" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> start, end <span class="kw">in</span> big_event_ranges:</span>
<span id="cb24-44"><a href="#cb24-44" aria-hidden="true" tabindex="-1"></a>    start <span class="op">=</span> pd.to_datetime(start)<span class="op">;</span> end <span class="op">=</span> pd.to_datetime(end)</span>
<span id="cb24-45"><a href="#cb24-45" aria-hidden="true" tabindex="-1"></a>    holdout.loc[(holdout[<span class="st">"dteday"</span>] <span class="op">&gt;=</span> start) <span class="op">&amp;</span> (holdout[<span class="st">"dteday"</span>] <span class="op">&lt;=</span> end), <span class="st">"big_event"</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb24-46"><a href="#cb24-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-47"><a href="#cb24-47" aria-hidden="true" tabindex="-1"></a><span class="co"># major_holiday (same logic as your notebook: US federal holidays + fixed dates, and uses existing holiday col) [page:1]</span></span>
<span id="cb24-48"><a href="#cb24-48" aria-hidden="true" tabindex="-1"></a>min_day <span class="op">=</span> holdout[<span class="st">"dteday"</span>].<span class="bu">min</span>()</span>
<span id="cb24-49"><a href="#cb24-49" aria-hidden="true" tabindex="-1"></a>max_day <span class="op">=</span> holdout[<span class="st">"dteday"</span>].<span class="bu">max</span>()</span>
<span id="cb24-50"><a href="#cb24-50" aria-hidden="true" tabindex="-1"></a>cal <span class="op">=</span> USFederalHolidayCalendar()</span>
<span id="cb24-51"><a href="#cb24-51" aria-hidden="true" tabindex="-1"></a>federal_holidays <span class="op">=</span> cal.holidays(start<span class="op">=</span>min_day, end<span class="op">=</span>max_day)</span>
<span id="cb24-52"><a href="#cb24-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-53"><a href="#cb24-53" aria-hidden="true" tabindex="-1"></a>fixed_major_md <span class="op">=</span> {(<span class="dv">1</span>, <span class="dv">1</span>), (<span class="dv">7</span>, <span class="dv">4</span>), (<span class="dv">12</span>, <span class="dv">25</span>)}</span>
<span id="cb24-54"><a href="#cb24-54" aria-hidden="true" tabindex="-1"></a>fixed_major <span class="op">=</span> holdout[<span class="st">"dteday"</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> d: (d.month, d.day) <span class="kw">in</span> fixed_major_md)</span>
<span id="cb24-55"><a href="#cb24-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-56"><a href="#cb24-56" aria-hidden="true" tabindex="-1"></a>holdout[<span class="st">"major_holiday"</span>] <span class="op">=</span> (</span>
<span id="cb24-57"><a href="#cb24-57" aria-hidden="true" tabindex="-1"></a>    (((holdout[<span class="st">"holiday"</span>] <span class="op">==</span> <span class="dv">1</span>) <span class="op">&amp;</span> (holdout[<span class="st">"dteday"</span>].isin(federal_holidays) <span class="op">|</span> fixed_major)) <span class="op">|</span> fixed_major)</span>
<span id="cb24-58"><a href="#cb24-58" aria-hidden="true" tabindex="-1"></a>).astype(<span class="bu">int</span>)</span>
<span id="cb24-59"><a href="#cb24-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-60"><a href="#cb24-60" aria-hidden="true" tabindex="-1"></a><span class="co"># IMPORTANT: your model expects weather_emergency too (it was in feature_cols) [page:1]</span></span>
<span id="cb24-61"><a href="#cb24-61" aria-hidden="true" tabindex="-1"></a><span class="co"># Your notebook printed the flagged dates list and created the column there; replicate by</span></span>
<span id="cb24-62"><a href="#cb24-62" aria-hidden="true" tabindex="-1"></a><span class="co"># defaulting to 0 unless you have a specific rule cell to copy over.</span></span>
<span id="cb24-63"><a href="#cb24-63" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="st">"weather_emergency"</span> <span class="kw">not</span> <span class="kw">in</span> holdout.columns:</span>
<span id="cb24-64"><a href="#cb24-64" aria-hidden="true" tabindex="-1"></a>    holdout[<span class="st">"weather_emergency"</span>] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb24-65"><a href="#cb24-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-66"><a href="#cb24-66" aria-hidden="true" tabindex="-1"></a><span class="co"># -----------------------------</span></span>
<span id="cb24-67"><a href="#cb24-67" aria-hidden="true" tabindex="-1"></a><span class="co"># 3) Build X in the same column order and scale with existing scaler</span></span>
<span id="cb24-68"><a href="#cb24-68" aria-hidden="true" tabindex="-1"></a><span class="co"># -----------------------------</span></span>
<span id="cb24-69"><a href="#cb24-69" aria-hidden="true" tabindex="-1"></a>X_holdout <span class="op">=</span> holdout[feature_cols].values   <span class="co"># feature_cols defined in your training cell [page:1]</span></span>
<span id="cb24-70"><a href="#cb24-70" aria-hidden="true" tabindex="-1"></a>X_holdout_scaled <span class="op">=</span> scaler.transform(X_holdout)  <span class="co"># scaler already fit on training data [page:1]</span></span>
<span id="cb24-71"><a href="#cb24-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-72"><a href="#cb24-72" aria-hidden="true" tabindex="-1"></a><span class="co"># -----------------------------</span></span>
<span id="cb24-73"><a href="#cb24-73" aria-hidden="true" tabindex="-1"></a><span class="co"># 4) Predict + save exactly as required</span></span>
<span id="cb24-74"><a href="#cb24-74" aria-hidden="true" tabindex="-1"></a><span class="co"># -----------------------------</span></span>
<span id="cb24-75"><a href="#cb24-75" aria-hidden="true" tabindex="-1"></a>pred <span class="op">=</span> model.predict(X_holdout_scaled).reshape(<span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb24-76"><a href="#cb24-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-77"><a href="#cb24-77" aria-hidden="true" tabindex="-1"></a>submission <span class="op">=</span> pd.DataFrame({<span class="st">"predictions"</span>: pred})</span>
<span id="cb24-78"><a href="#cb24-78" aria-hidden="true" tabindex="-1"></a>submission.to_csv(<span class="st">"team4-module4-predictions.csv"</span>, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb24-79"><a href="#cb24-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-80"><a href="#cb24-80" aria-hidden="true" tabindex="-1"></a>submission.head(), submission.shape</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<div class="ansi-escaped-output">
<pre><span class="ansi-bold">12/12</span> <span class="ansi-green-fg">━━━━━━━━━━━━━━━━━━━━</span> <span class="ansi-bold">0s</span> 3ms/step 
</pre>
</div>
</div>
<div class="cell-output cell-output-display" data-execution_count="61">
<pre><code>(   predictions
 0          0.0
 1          0.0
 2          0.0
 3          0.0
 4          0.0,
 (384, 1))</code></pre>
</div>
</div>


</section>
</section>
</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/jacob-walker12\.github\.io\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Jacob_Walker 2025©</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/jacob-m-walker/">
      <i class="bi bi-linkedin" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>